"use strict";(()=>{var e={};e.id=926,e.ids=[926],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},76224:e=>{e.exports=require("tty")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},54681:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>w,originalPathname:()=>R,patchFetch:()=>U,requestAsyncStorage:()=>b,routeModule:()=>T,serverHooks:()=>C,staticGenerationAsyncStorage:()=>k,staticGenerationBailout:()=>I});var a={};r.r(a),r.d(a,{GET:()=>E,dynamic:()=>A,fetchCache:()=>M,revalidate:()=>_});var s=r(95419),o=r(69108),n=r(99678),i=r(78070),p=r(83949);let{Axios:u,AxiosError:l,CanceledError:c,isCancel:d,CancelToken:h,VERSION:g,all:m,Cancel:f,isAxiosError:v,spread:y,toFormData:S,AxiosHeaders:P,HttpStatusCode:q,formToJSON:x,getAdapter:L,mergeConfig:$}=p.default,A="force-dynamic",M="force-no-store",_=0;if(!process.env.MLS_ACCESS_TOKEN||!process.env.MLS_API_URL)throw Error("Missing required environment variables: MLS_ACCESS_TOKEN and/or MLS_API_URL");async function E(e){try{let{searchParams:t}=new URL(e.url),r=parseInt(t.get("page")||"1"),a=(r-1)*50,s=t.get("search"),o=t.get("sort")||"default",n=[];if(s){let e=s.trim().split(" ").filter(Boolean);if(e.length>0){let t=e.map(e=>{let t=e.replace(/'/g,"''");return`(
            contains(UnparsedAddress, '${t}') or
            contains(City, '${t}') or
            contains(StateOrProvince, '${t}') or
            contains(PostalCode, '${t}') or
            contains(PropertyType, '${t}')
          )`});n.push(`(${t.join(" and ")})`)}}let u=t.get("priceMin"),l=t.get("priceMax");u&&Number(u)>0&&n.push(`ListPrice ge ${u}`),l&&"any"!==l&&1e6>Number(l)&&n.push(`ListPrice le ${l}`);let c=t.get("beds");c&&"any"!==c&&n.push(`BedroomsTotal ge ${c}`);let d=t.get("baths");d&&"any"!==d&&n.push(`BathroomsTotalInteger ge ${d}`);let h=t.get("propertyType");h&&"any"!==h&&n.push(`PropertyType eq '${h}'`);let g=t.get("status");g&&"any"!==g&&n.push(`StandardStatus eq '${g}'`);let m=["$top=50","$skip="+a,"$count=true"];n.length>0&&m.push("$filter="+n.join(" and "));let f="ModificationTimestamp desc";switch(o){case"price_desc":f="ListPrice desc";break;case"price_asc":f="ListPrice asc";break;case"newest":case"popular":f="ModificationTimestamp desc"}m.push("$orderby="+f);let v=`${process.env.MLS_API_URL}?${m.join("&")}`;console.log("MLS API Request URL:",v);let y=await p.default.get(v,{headers:{Authorization:`Bearer ${process.env.MLS_ACCESS_TOKEN}`,Accept:"application/json"}});if(console.log("MLS API Response:",{total:y.data["@odata.count"],returned:y.data.value?.length}),!y.data||!Array.isArray(y.data.value))throw Error("Invalid response format from MLS API");let S=y.data["@odata.count"]||y.data.value.length;return i.Z.json({properties:y.data.value,total:S,page:r,pageSize:50,totalPages:Math.ceil(S/50)})}catch(e){return console.error("MLS API Error:",{message:e instanceof Error?e.message:"Unknown error",status:e instanceof l?e.response?.status:void 0,data:e instanceof l?e.response?.data:void 0}),i.Z.json({error:"Failed to fetch MLS data",details:e instanceof Error?e.message:"Unknown error"},{status:e instanceof l&&e.response?.status||500})}}let T=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/mls/route",pathname:"/api/mls",filename:"route",bundlePath:"app/api/mls/route"},resolvedPagePath:"/Users/chakrinaidu/Desktop/gethomerealty-verson-2/app/api/mls/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:b,staticGenerationAsyncStorage:k,serverHooks:C,headerHooks:w,staticGenerationBailout:I}=T,R="/api/mls/route";function U(){return(0,n.patchFetch)({serverHooks:C,staticGenerationAsyncStorage:k})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[1638,6206,1185,3949],()=>r(54681));module.exports=a})();