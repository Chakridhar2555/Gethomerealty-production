"use strict";(()=>{var e={};e.id=666,e.ids=[666],e.modules={38013:e=>{e.exports=require("mongodb")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},33479:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>w,originalPathname:()=>g,patchFetch:()=>j,requestAsyncStorage:()=>m,routeModule:()=>v,serverHooks:()=>h,staticGenerationAsyncStorage:()=>y,staticGenerationBailout:()=>f});var n={};r.r(n),r.d(n,{GET:()=>d,POST:()=>l,PUT:()=>p});var o=r(95419),a=r(69108),i=r(99678),s=r(78070),u=r(22345),c=r(38013);async function d(){try{let{db:e}=await (0,u.v)(),t=await e.collection("inventory").find({}).toArray();return s.Z.json(t)}catch(e){return s.Z.json({error:"Failed to fetch inventory items"},{status:500})}}async function l(e){try{let{db:t}=await (0,u.v)(),r=await e.json(),n=new Date().toISOString(),o={...r,createdAt:n,updatedAt:n,lastUpdated:n},a=await t.collection("inventory").insertOne(o);if(!a.insertedId)throw Error("Failed to create item");return s.Z.json({success:!0,item:{...o,_id:a.insertedId}})}catch(e){return s.Z.json({error:"Failed to create inventory item"},{status:500})}}async function p(e){try{let{db:t}=await (0,u.v)(),{id:r,...n}=await e.json();if(!r||!c.ObjectId.isValid(r))return s.Z.json({error:"Invalid item ID"},{status:400});let o=new Date().toISOString();n.updatedAt=o,n.lastUpdated=o;let a=await t.collection("inventory").updateOne({_id:new c.ObjectId(r)},{$set:n});if(0===a.matchedCount)return s.Z.json({error:"Item not found"},{status:404});if(0===a.modifiedCount)return s.Z.json({error:"No changes were made to the item"},{status:400});return s.Z.json({success:!0,message:"Item updated successfully"})}catch(e){return console.error("Error updating inventory item:",e),s.Z.json({error:"Failed to update inventory item"},{status:500})}}let v=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/inventory/route",pathname:"/api/inventory",filename:"route",bundlePath:"app/api/inventory/route"},resolvedPagePath:"/Users/chakrinaidu/Desktop/gethomerealty-verson-2/app/api/inventory/route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:y,serverHooks:h,headerHooks:w,staticGenerationBailout:f}=v,g="/api/inventory/route";function j(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:y})}},22345:(e,t,r)=>{let n;r.d(t,{v:()=>i});var o=r(38013);if(!process.env.MONGODB_URI)throw Error("Please add your Mongo URI to .env.local");let a=process.env.MONGODB_URI;async function i(){try{let e=await n;return{db:e.db(),client:e}}catch(e){throw console.error("MongoDB connection error:",e),e}}n=new o.MongoClient(a,{connectTimeoutMS:1e4,socketTimeoutMS:45e3,serverSelectionTimeoutMS:5e3,maxPoolSize:10,retryWrites:!0,retryReads:!0}).connect()}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[1638,6206],()=>r(33479));module.exports=n})();