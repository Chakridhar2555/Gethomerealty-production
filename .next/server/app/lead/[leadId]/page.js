(()=>{var e={};e.id=6723,e.ids=[6723],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},15673:e=>{"use strict";e.exports=require("node:events")},97742:e=>{"use strict";e.exports=require("node:process")},47261:e=>{"use strict";e.exports=require("node:util")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},85477:e=>{"use strict";e.exports=require("punycode")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},14157:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>o,routeModule:()=>h,tree:()=>c});var t=a(50482),r=a(69108),l=a(62563),i=a.n(l),n=a(68300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let c=["",{children:["lead",{children:["[leadId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,54190)),"/Users/chakrinaidu/Desktop/gethomerealty-verson-2/app/lead/[leadId]/page.tsx"]}]},{error:[()=>Promise.resolve().then(a.bind(a,73518)),"/Users/chakrinaidu/Desktop/gethomerealty-verson-2/app/lead/[leadId]/error.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,17700)),"/Users/chakrinaidu/Desktop/gethomerealty-verson-2/app/lead/[leadId]/loading.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,65378)),"/Users/chakrinaidu/Desktop/gethomerealty-verson-2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/chakrinaidu/Desktop/gethomerealty-verson-2/app/lead/[leadId]/page.tsx"],u="/lead/[leadId]/page",p={require:a,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/lead/[leadId]/page",pathname:"/lead/[leadId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},47244:(e,s,a)=>{Promise.resolve().then(a.bind(a,8228))},97499:(e,s,a)=>{Promise.resolve().then(a.bind(a,75806))},35303:()=>{},8228:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var t=a(95344),r=a(3729),l=a(16212);function i({error:e,reset:s}){return(0,r.useEffect)(()=>{console.error("Lead page error:",e)},[e]),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Something went wrong!"}),t.jsx(l.z,{onClick:()=>s(),variant:"outline",children:"Try again"})]})}},75806:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>z});var t=a(95344),r=a(3729),l=a(8428),i=a(53833),n=a(61351),d=a(16212),c=a(92549),o=a(54572),u=a(93601),p=a(17470),h=a(25092),m=a(63024),x=a(31498),y=a(40626),f=a(51838),v=a(91626),j=a(16802);function g({calls:e=[]}){let[s,a]=(0,r.useState)(!1),l=e=>{try{return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`}catch(e){return console.error("Error formatting duration:",e),"0:00"}};return(0,t.jsxs)(t.Fragment,{children:[t.jsx(d.z,{variant:"outline",size:"sm",className:"w-full",onClick:()=>a(!0),children:"View Call History"}),t.jsx(j.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(j.cZ,{children:[t.jsx(j.fK,{children:t.jsx(j.$N,{children:"Call History"})}),t.jsx("div",{className:"space-y-4",children:0===e.length?t.jsx("p",{className:"text-center text-gray-500",children:"No calls recorded yet"}):e.map((e,s)=>(0,t.jsxs)("div",{className:"flex justify-between items-center border-b pb-2",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:(0,v.p)(e.date,"MMM d, yyyy h:mm a")}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Duration: ",l(e.duration)]})]}),e.recording&&t.jsx(d.z,{variant:"outline",size:"sm",children:"Play Recording"})]},s))})]})})]})}var b=a(86460);function N({showings:e,onAddShowing:s}){let[a,l]=(0,r.useState)(!1),[i,n]=(0,r.useState)(),[p,m]=(0,r.useState)({status:"scheduled"}),{toast:x}=(0,h.pm)(),y=s=>e.filter(e=>new Date(e.date).toDateString()===s.toDateString());return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"text-lg font-medium",children:"Showings"}),(0,t.jsxs)(j.Vq,{open:a,onOpenChange:l,children:[t.jsx(j.hg,{asChild:!0,children:(0,t.jsxs)(d.z,{size:"sm",children:[t.jsx(f.Z,{className:"h-4 w-4 mr-2"}),"Add Showing"]})}),(0,t.jsxs)(j.cZ,{children:[t.jsx(j.fK,{children:t.jsx(j.$N,{children:"Schedule a Showing"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Date"}),t.jsx(b.f,{mode:"single",selected:i,onSelect:n,className:"rounded-md border"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Time"}),t.jsx(c.I,{type:"time",value:p.time,onChange:e=>m({...p,time:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Property"}),t.jsx(c.I,{value:p.property,onChange:e=>m({...p,property:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Notes"}),t.jsx(u.g,{value:p.notes,onChange:e=>m({...p,notes:e.target.value})})]}),t.jsx(d.z,{onClick:()=>{if(!i||!p.time||!p.property){x({variant:"destructive",title:"Error",description:"Please fill in all required fields"});return}s({id:crypto.randomUUID(),date:i,time:p.time,property:p.property,notes:p.notes,status:"scheduled"}),l(!1),m({status:"scheduled"}),n(void 0),x({title:"Success",description:"Showing scheduled successfully"})},className:"w-full",children:"Schedule Showing"})]})]})]})]}),t.jsx(b.f,{mode:"single",className:"rounded-md border",modifiers:{hasShowing:e=>y(e).length>0},modifiersStyles:{hasShowing:{backgroundColor:"var(--primary)",color:"white"}}})]})}var w=a(85814),k=a(82958),P=a(67970);function S({tasks:e,onAddTask:s,onUpdateTask:a}){let[l,i]=(0,r.useState)(!1),[n,p]=(0,r.useState)({status:"pending",priority:"medium",date:""}),{toast:m}=(0,h.pm)(),x=e=>{switch(e){case"high":return"text-red-500";case"medium":return"text-yellow-500";case"low":return"text-green-500";default:return"text-gray-500"}},y=e=>new Date(e).toLocaleDateString();return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"text-lg font-medium",children:"Tasks"}),(0,t.jsxs)(j.Vq,{open:l,onOpenChange:i,children:[t.jsx(j.hg,{asChild:!0,children:(0,t.jsxs)(d.z,{size:"sm",children:[t.jsx(f.Z,{className:"h-4 w-4 mr-2"}),"Add Task"]})}),(0,t.jsxs)(j.cZ,{children:[t.jsx(j.fK,{children:t.jsx(j.$N,{children:"Add New Task"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Title"}),t.jsx(c.I,{value:n.title,onChange:e=>p({...n,title:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Date"}),t.jsx(c.I,{type:"date",value:n.date,onChange:e=>p({...n,date:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Priority"}),(0,t.jsxs)("select",{className:"w-full rounded-md border border-input bg-background px-3 py-2",value:n.priority,onChange:e=>p({...n,priority:e.target.value}),children:[t.jsx("option",{value:"low",children:"Low"}),t.jsx("option",{value:"medium",children:"Medium"}),t.jsx("option",{value:"high",children:"High"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Description"}),t.jsx(u.g,{value:n.description,onChange:e=>p({...n,description:e.target.value})})]}),t.jsx(d.z,{onClick:()=>{if(!n.title||!n.date){m({variant:"destructive",title:"Error",description:"Please fill in all required fields"});return}s({id:crypto.randomUUID(),title:n.title,date:n.date,description:n.description,status:"pending",priority:n.priority||"medium"}),i(!1),p({status:"pending",priority:"medium",date:""}),m({title:"Success",description:"Task added successfully"})},className:"w-full",children:"Add Task"})]})]})]})]}),t.jsx("div",{className:"space-y-2",children:e.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>a(e.id,{status:"completed"===e.status?"pending":"completed"}),children:"completed"===e.status?t.jsx(w.Z,{className:"h-5 w-5 text-green-500"}):t.jsx(k.Z,{className:"h-5 w-5 text-gray-400"})}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:e.title}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[y(e.date)," • ",t.jsx("span",{className:x(e.priority),children:e.priority})]})]})]}),t.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>a(e.id,{status:"cancelled"}),children:t.jsx(P.Z,{className:"h-5 w-5 text-red-500"})})]},e.id))})]})}let _=[{value:"cold",label:"Cold"},{value:"warm",label:"Warm"},{value:"hot",label:"Hot"},{value:"mild",label:"Mild"}],C=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"not answering",label:"Not Answering"},{value:"not actively answering",label:"Not Actively Answering"},{value:"always responding",label:"Always Responding"}],I=[{value:"google ads",label:"Google Ads"},{value:"meta",label:"Meta"},{value:"refferal",label:"Refferal"},{value:"linkedin",label:"LinkedIn"},{value:"youtube",label:"YouTube"}],T=[{value:"Pre construction",label:"Pre Construction"},{value:"resale",label:"Resale"},{value:"seller",label:"Seller"},{value:"buyer",label:"Buyer"}],q=[{value:"Investor",label:"Investor"},{value:"custom buyer",label:"Custom Buyer"},{value:"first home buyer",label:"First Home Buyer"},{value:"seasonal investor",label:"Seasonal Investor"},{value:"commercial buyer",label:"Commercial Buyer"}],Z=[{value:"downtown",label:"Downtown"},{value:"north_york",label:"North York"},{value:"scarborough",label:"Scarborough"},{value:"etobicoke",label:"Etobicoke"},{value:"mississauga",label:"Mississauga"},{value:"brampton",label:"Brampton"},{value:"markham",label:"Markham"},{value:"vaughan",label:"Vaughan"}];function z(){let e=(0,l.useRouter)(),s=(0,l.useParams)(),{toast:a}=(0,h.pm)(),[j,b]=(0,r.useState)(null),[w,k]=(0,r.useState)(!1),[P,z]=(0,r.useState)(""),[D,E]=(0,r.useState)([]);(0,r.useEffect)(()=>{s?.leadId&&(M(),A())},[s?.leadId]);let M=async()=>{try{if(!s?.leadId)return;let e=s.leadId;if(!e)return;console.log("Fetching lead with ID:",e);let a=await fetch(`/api/leads/${e}`),t=await a.json();if(!a.ok)throw console.error("Error response:",t),Error(t.error||"Failed to fetch lead");console.log("Fetched lead data:",t),b(t)}catch(s){console.error("Fetch lead error:",s),a({variant:"destructive",title:"Error",description:"Failed to fetch lead details"}),e.push("/lead")}},A=async()=>{try{let e=await fetch("/api/users"),s=await e.json();E(s)}catch(e){console.error("Error fetching users:",e),a({variant:"destructive",title:"Error",description:"Failed to fetch users"})}},$=async()=>{if(j&&s?.leadId){k(!0);try{if(!(await fetch(`/api/leads/${s.leadId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)})).ok)throw Error("Failed to update lead");window.dispatchEvent(new Event("leadUpdated")),a({title:"Success",description:"Lead updated successfully"})}catch(e){console.error("Update lead error:",e),a({variant:"destructive",title:"Error",description:"Failed to update lead"})}finally{k(!1)}}},R=async(e,t)=>{if(j&&s?.leadId)try{let r=[...j.callHistory||[]];r[e].points||(r[e].points=[]),r[e].points.push({text:t,timestamp:new Date().toISOString()});let l={...j,callHistory:r};if(b(l),!(await fetch(`/api/leads/${s.leadId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({callHistory:r})})).ok)throw Error("Failed to save call point");a({title:"Success",description:"Call point added successfully"})}catch(e){a({variant:"destructive",title:"Error",description:"Failed to add call point"})}},O=async()=>{if(P.trim()&&j&&s?.leadId)try{console.log("Adding note for lead:",s.leadId);let e=new Date().toISOString(),t=j.notes?`${j.notes}

${e}: ${P}`:`${e}: ${P}`,r=await fetch(`/api/leads/${s.leadId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({notes:t})}),l=await r.json();if(console.log("Response from server:",l),!r.ok)throw Error(l.error||"Failed to save note");b(l),z(""),a({title:"Success",description:"Note added successfully"})}catch(e){console.error("Save note error:",e),a({variant:"destructive",title:"Error",description:e instanceof Error?e.message:"Failed to save note"})}};return j?t.jsx(i.c,{children:(0,t.jsxs)("div",{className:"space-y-6 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(d.z,{variant:"outline",onClick:()=>e.back(),className:"border-black text-black hover:bg-black hover:text-white",children:[t.jsx(m.Z,{className:"h-4 w-4 mr-2"}),"Back to Leads"]}),(0,t.jsxs)(d.z,{onClick:$,disabled:w,className:"bg-[#ef4444] hover:bg-[#dc2626] text-white",children:[t.jsx(x.Z,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)(n.Zb,{children:[t.jsx(n.Ol,{children:t.jsx(n.ll,{children:"Lead Information"})}),t.jsx(n.aY,{children:(0,t.jsxs)("form",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Name"}),t.jsx(c.I,{value:j.name,onChange:e=>b({...j,name:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Email"}),t.jsx(c.I,{type:"email",value:j.email,onChange:e=>b({...j,email:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Phone"}),t.jsx(c.I,{value:j.phone,onChange:e=>b({...j,phone:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Assigned To"}),(0,t.jsxs)(p.Ph,{value:j.assignedTo||"unassigned",onValueChange:e=>b({...j,assignedTo:e}),children:[t.jsx(p.i4,{children:t.jsx(p.ki,{placeholder:"Select a user"})}),(0,t.jsxs)(p.Bw,{children:[t.jsx(p.Ql,{value:"unassigned",children:"Unassigned"}),D.map(e=>t.jsx(p.Ql,{value:e._id,children:e.name},e._id))]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Property"}),t.jsx(c.I,{value:j.property,onChange:e=>b({...j,property:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Location"}),(0,t.jsxs)(p.Ph,{value:j.location||"",onValueChange:e=>b({...j,location:e}),children:[t.jsx(p.i4,{children:t.jsx(p.ki,{placeholder:"Select location"})}),t.jsx(p.Bw,{children:Z.map(e=>t.jsx(p.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Created Date"}),t.jsx("div",{className:"text-sm text-gray-500",children:(0,v.p)(j.date)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Lead Status"}),(0,t.jsxs)(p.Ph,{value:j.leadStatus,onValueChange:e=>b({...j,leadStatus:e}),children:[t.jsx(p.i4,{children:t.jsx(p.ki,{placeholder:"Select lead status"})}),t.jsx(p.Bw,{children:_.map(e=>t.jsx(p.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Lead Response"}),(0,t.jsxs)(p.Ph,{value:j.leadResponse,onValueChange:e=>b({...j,leadResponse:e}),children:[t.jsx(p.i4,{children:t.jsx(p.ki,{placeholder:"Select lead response"})}),t.jsx(p.Bw,{children:C.map(e=>t.jsx(p.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Lead Source"}),(0,t.jsxs)(p.Ph,{value:j.leadSource,onValueChange:e=>b({...j,leadSource:e}),children:[t.jsx(p.i4,{children:t.jsx(p.ki,{placeholder:"Select lead source"})}),t.jsx(p.Bw,{children:I.map(e=>t.jsx(p.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Lead Type"}),(0,t.jsxs)(p.Ph,{value:j.leadType,onValueChange:e=>b({...j,leadType:e}),children:[t.jsx(p.i4,{children:t.jsx(p.ki,{placeholder:"Select lead type"})}),t.jsx(p.Bw,{children:T.map(e=>t.jsx(p.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Client Type"}),(0,t.jsxs)(p.Ph,{value:j.clientType,onValueChange:e=>b({...j,clientType:e}),children:[t.jsx(p.i4,{children:t.jsx(p.ki,{placeholder:"Select client type"})}),t.jsx(p.Bw,{children:q.map(e=>t.jsx(p.Ql,{value:e.value,children:e.label},e.value))})]})]})]})]})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(n.Zb,{children:[t.jsx(n.Ol,{children:t.jsx(n.ll,{children:"Communication"})}),(0,t.jsxs)(n.aY,{className:"space-y-4",children:[(0,t.jsxs)(d.z,{className:"w-full",onClick:()=>{if(!j?.phone)return;let e=new Date().toISOString(),s=[...j.callHistory||[],{date:e,duration:0,recording:void 0,points:[]}];b({...j,callHistory:s}),a({title:"Calling",description:`Initiating call to ${j.phone}`})},children:[t.jsx(y.Z,{className:"h-4 w-4 mr-2"}),"Make Call"]}),t.jsx("div",{className:"space-y-4",children:(j.callHistory||[]).map((e,s)=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-medium",children:["Call on ",(0,v.p)(e.date)]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Duration: ",e.duration," minutes"]})]}),e.recording&&t.jsx(d.z,{variant:"outline",size:"sm",children:"Play Recording"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(c.I,{placeholder:"Add key points from the call...",onKeyDown:e=>{"Enter"===e.key&&e.target.value.trim()&&(R(s,e.target.value.trim()),e.target.value="")}}),t.jsx(d.z,{variant:"outline",onClick:e=>{let a=e.currentTarget.previousElementSibling;a.value.trim()&&(R(s,a.value.trim()),a.value="")},children:"Add Point"})]}),e.points&&e.points.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{className:"text-sm font-medium",children:"Key Points:"}),t.jsx("ul",{className:"space-y-1",children:e.points.map((e,s)=>(0,t.jsxs)("li",{className:"text-sm flex items-start gap-2",children:[t.jsx("span",{className:"mt-1",children:"•"}),t.jsx("span",{children:e.text})]},s))})]})]})]},s))}),t.jsx(g,{calls:j.callHistory||[]})]})]}),(0,t.jsxs)(n.Zb,{children:[t.jsx(n.Ol,{children:t.jsx(n.ll,{children:"Notes"})}),t.jsx(n.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(u.g,{placeholder:"Add a new note...",value:P,onChange:e=>z(e.target.value),className:"flex-1"}),(0,t.jsxs)(d.z,{onClick:O,className:"self-start",disabled:!P.trim()||w,children:[t.jsx(f.Z,{className:"h-4 w-4 mr-2"}),"Add Note"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[j?.notes?.split("\n\n").map((e,s)=>t.jsx("div",{className:"text-sm border-b pb-2",children:e},s)),!j?.notes&&t.jsx("p",{className:"text-sm text-gray-500",children:"No notes yet"})]})]})})]}),(0,t.jsxs)(n.Zb,{children:[t.jsx(n.Ol,{children:t.jsx(n.ll,{children:"Property Preferences"})}),t.jsx(n.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Budget Range"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(c.I,{type:"number",placeholder:"Min",value:j.propertyPreferences?.budget?.min||"",onChange:e=>b({...j,propertyPreferences:{propertyType:j.propertyPreferences?.propertyType||[],bedrooms:j.propertyPreferences?.bedrooms||0,bathrooms:j.propertyPreferences?.bathrooms||0,locations:j.propertyPreferences?.locations||[],features:j.propertyPreferences?.features||[],budget:{min:Number(e.target.value),max:j.propertyPreferences?.budget?.max||0}}})}),t.jsx(c.I,{type:"number",placeholder:"Max",value:j.propertyPreferences?.budget?.max||"",onChange:e=>b({...j,propertyPreferences:{propertyType:j.propertyPreferences?.propertyType||[],bedrooms:j.propertyPreferences?.bedrooms||0,bathrooms:j.propertyPreferences?.bathrooms||0,locations:j.propertyPreferences?.locations||[],features:j.propertyPreferences?.features||[],budget:{min:j.propertyPreferences?.budget?.min||0,max:Number(e.target.value)}}})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(o._,{children:"Property Type"}),(0,t.jsxs)(p.Ph,{value:j.propertyPreferences?.propertyType?.[0]||"",onValueChange:e=>b({...j,propertyPreferences:{propertyType:[e],bedrooms:j.propertyPreferences?.bedrooms||0,bathrooms:j.propertyPreferences?.bathrooms||0,locations:j.propertyPreferences?.locations||[],features:j.propertyPreferences?.features||[],budget:{min:j.propertyPreferences?.budget?.min||0,max:j.propertyPreferences?.budget?.max||0}}}),children:[t.jsx(p.i4,{children:t.jsx(p.ki,{placeholder:"Select type"})}),(0,t.jsxs)(p.Bw,{children:[t.jsx(p.Ql,{value:"detached",children:"Detached"}),t.jsx(p.Ql,{value:"semi-detached",children:"Semi-Detached"}),t.jsx(p.Ql,{value:"townhouse",children:"Townhouse"}),t.jsx(p.Ql,{value:"condo",children:"Condo"})]})]})]})]}),t.jsx(N,{showings:j.showings||[],onAddShowing:async e=>{if(!s?.leadId)return;let t=[...j.showings||[],{...e,id:e.id||""}];b({...j,showings:t});try{if(!(await fetch(`/api/leads/${s.leadId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({showings:t})})).ok)throw Error("Failed to update showings");a({title:"Success",description:"Showing scheduled successfully"})}catch(e){a({variant:"destructive",title:"Error",description:"Failed to schedule showing"})}}})]})})]}),(0,t.jsxs)(n.Zb,{className:"mt-6",children:[t.jsx(n.Ol,{children:t.jsx(n.ll,{children:"Tasks"})}),t.jsx(n.aY,{children:t.jsx(S,{tasks:j.tasks||[],onAddTask:async e=>{if(!s?.leadId)return;let t=[...j.tasks||[],e];b({...j,tasks:t});try{if(!(await fetch(`/api/leads/${s.leadId}/tasks`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tasks:t})})).ok)throw Error("Failed to add task");a({title:"Success",description:"Task added successfully"})}catch(e){a({variant:"destructive",title:"Error",description:"Failed to add task"})}},onUpdateTask:async(e,t)=>{if(s?.leadId)try{let r={...t,date:t.date?new Date(t.date).toISOString():void 0};if(!(await fetch(`/api/leads/${s.leadId}/tasks/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw Error("Failed to update task");let l=j.tasks?.map(s=>s.id===e?{...s,...t}:s)||[];b({...j,tasks:l}),a({title:"Success",description:"Task updated successfully"})}catch(e){a({variant:"destructive",title:"Error",description:"Failed to update task"})}}})})]})]})]})]})}):t.jsx(i.c,{children:t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading lead details..."}),t.jsx("p",{className:"text-gray-500",children:"Please wait while we fetch the information."})]})})})}},86460:(e,s,a)=>{"use strict";a.d(s,{f:()=>c});var t=a(95344);a(3729);var r=a(71532),l=a(97751),i=a(79393),n=a(91626),d=a(16212);function c({className:e,classNames:s,showOutsideDays:a=!0,...c}){return t.jsx(i._W,{showOutsideDays:a,className:(0,n.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,n.cn)((0,d.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,n.cn)((0,d.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({...e})=>t.jsx(r.Z,{className:"h-4 w-4"}),IconRight:({...e})=>t.jsx(l.Z,{className:"h-4 w-4"})},...c})}c.displayName="Calendar"},54572:(e,s,a)=>{"use strict";a.d(s,{_:()=>o});var t=a(95344),r=a(3729),l=a(62409),i=r.forwardRef((e,s)=>(0,t.jsx)(l.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var n=a(49247),d=a(91626);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...s},a)=>t.jsx(i,{ref:a,className:(0,d.cn)(c(),e),...s}));o.displayName=i.displayName},17470:(e,s,a)=>{"use strict";a.d(s,{Bw:()=>x,Ph:()=>o,Ql:()=>y,i4:()=>p,ki:()=>u});var t=a(95344),r=a(3729),l=a(69669),i=a(25390),n=a(12704),d=a(62312),c=a(91626);let o=l.fC;l.ZA;let u=l.B4,p=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(l.xz,{ref:r,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[s,t.jsx(l.JO,{asChild:!0,children:t.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=l.xz.displayName;let h=r.forwardRef(({className:e,...s},a)=>t.jsx(l.u_,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(n.Z,{className:"h-4 w-4"})}));h.displayName=l.u_.displayName;let m=r.forwardRef(({className:e,...s},a)=>t.jsx(l.$G,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(i.Z,{className:"h-4 w-4"})}));m.displayName=l.$G.displayName;let x=r.forwardRef(({className:e,children:s,position:a="popper",...r},i)=>t.jsx(l.h_,{children:(0,t.jsxs)(l.VY,{ref:i,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[t.jsx(h,{}),t.jsx(l.l_,{className:(0,c.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),t.jsx(m,{})]})}));x.displayName=l.VY.displayName,r.forwardRef(({className:e,...s},a)=>t.jsx(l.__,{ref:a,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=l.__.displayName;let y=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(l.ck,{ref:r,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(l.wU,{children:t.jsx(d.Z,{className:"h-4 w-4"})})}),t.jsx(l.eT,{children:s})]}));y.displayName=l.ck.displayName,r.forwardRef(({className:e,...s},a)=>t.jsx(l.Z0,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=l.Z0.displayName},93601:(e,s,a)=>{"use strict";a.d(s,{g:()=>i});var t=a(95344),r=a(3729),l=a(91626);let i=r.forwardRef(({className:e,...s},a)=>t.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));i.displayName="Textarea"},63024:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(97075).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},85814:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(97075).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},67970:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(97075).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},51838:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(97075).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},31498:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(97075).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},73518:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let t=(0,a(86843).createProxy)(String.raw`/Users/chakrinaidu/Desktop/gethomerealty-verson-2/app/lead/[leadId]/error.tsx`),{__esModule:r,$$typeof:l}=t,i=t.default},17700:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});var t=a(25036);function r(){return t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading lead details..."}),t.jsx("p",{className:"text-gray-500",children:"Please wait while we fetch the information."})]})})}},54190:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let t=(0,a(86843).createProxy)(String.raw`/Users/chakrinaidu/Desktop/gethomerealty-verson-2/app/lead/[leadId]/page.tsx`),{__esModule:r,$$typeof:l}=t,i=t.default},2633:(e,s,a)=>{"use strict";function t(e,[s,a]){return Math.min(a,Math.max(s,e))}a.d(s,{u:()=>t})}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[1638,8139,4579,9969,9410,1004,6922,5047,8606,3833],()=>a(14157));module.exports=t})();