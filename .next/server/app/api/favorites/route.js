"use strict";(()=>{var e={};e.id=4121,e.ids=[4121],e.modules={38013:e=>{e.exports=require("mongodb")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32656:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>y,originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>f,staticGenerationAsyncStorage:()=>v,staticGenerationBailout:()=>g});var o={};t.r(o),t.d(o,{GET:()=>c,POST:()=>d});var a=t(95419),n=t(69108),i=t(99678),s=t(78070),u=t(22345);async function c(e){try{let{searchParams:r}=new URL(e.url),t=r.get("userId");if(!t)return s.Z.json({error:"User ID is required"},{status:400});let{db:o}=await (0,u.v)(),a=await o.collection("favorites").find({userId:t}).toArray();return s.Z.json({favorites:a})}catch(e){return console.error("Error fetching favorites:",e),s.Z.json({error:"Failed to fetch favorites"},{status:500})}}async function d(e){try{let{userId:r,property:t}=await e.json();if(!r||!t)return s.Z.json({error:"User ID and property are required"},{status:400});let{db:o}=await (0,u.v)();if(await o.collection("favorites").findOne({userId:r,"property.ListingKey":t.ListingKey}))return await o.collection("favorites").deleteOne({userId:r,"property.ListingKey":t.ListingKey}),s.Z.json({success:!0,action:"removed"});return await o.collection("favorites").insertOne({userId:r,property:t,createdAt:new Date().toISOString()}),s.Z.json({success:!0,action:"added"})}catch(e){return console.error("Error updating favorites:",e),s.Z.json({error:"Failed to update favorites"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/favorites/route",pathname:"/api/favorites",filename:"route",bundlePath:"app/api/favorites/route"},resolvedPagePath:"/Users/chakrinaidu/Desktop/gethomerealty-verson-2/app/api/favorites/route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:v,serverHooks:f,headerHooks:y,staticGenerationBailout:g}=l,h="/api/favorites/route";function m(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:v})}},22345:(e,r,t)=>{let o;t.d(r,{v:()=>i});var a=t(38013);if(!process.env.MONGODB_URI)throw Error("Please add your Mongo URI to .env.local");let n=process.env.MONGODB_URI;async function i(){try{let e=await o;return{db:e.db(),client:e}}catch(e){throw console.error("MongoDB connection error:",e),e}}o=new a.MongoClient(n,{connectTimeoutMS:1e4,socketTimeoutMS:45e3,serverSelectionTimeoutMS:5e3,maxPoolSize:10,retryWrites:!0,retryReads:!0}).connect()}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[1638,6206],()=>t(32656));module.exports=o})();