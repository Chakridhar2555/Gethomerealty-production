"use strict";(()=>{var e={};e.id=2658,e.ids=[2658],e.modules={38013:e=>{e.exports=require("mongodb")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27512:(e,o,t)=>{t.r(o),t.d(o,{headerHooks:()=>g,originalPathname:()=>w,patchFetch:()=>v,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>m});var r={};t.r(r),t.d(r,{GET:()=>u});var n=t(95419),a=t(69108),s=t(99678),i=t(78070),c=t(22345);async function u(){try{let{db:e}=await (0,c.v)(),o=(await e.collection("leads").find({showings:{$exists:!0}}).project({name:1,showings:1}).toArray()).flatMap(e=>e.showings.map(o=>({...o,leadName:e.name,leadId:e._id.toString()})));return i.Z.json(o)}catch(e){return console.error("Fetch showings error:",e),i.Z.json({error:"Failed to fetch showings"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/showings/route",pathname:"/api/showings",filename:"route",bundlePath:"app/api/showings/route"},resolvedPagePath:"/Users/chakrinaidu/Desktop/gethomerealty-verson-2/app/api/showings/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:h,headerHooks:g,staticGenerationBailout:m}=d,w="/api/showings/route";function v(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:p})}},22345:(e,o,t)=>{let r;t.d(o,{v:()=>s});var n=t(38013);if(!process.env.MONGODB_URI)throw Error("Please add your Mongo URI to .env.local");let a=process.env.MONGODB_URI;async function s(){try{let e=await r;return{db:e.db(),client:e}}catch(e){throw console.error("MongoDB connection error:",e),e}}r=new n.MongoClient(a,{connectTimeoutMS:1e4,socketTimeoutMS:45e3,serverSelectionTimeoutMS:5e3,maxPoolSize:10,retryWrites:!0,retryReads:!0}).connect()}};var o=require("../../../webpack-runtime.js");o.C(e);var t=e=>o(o.s=e),r=o.X(0,[1638,6206],()=>t(27512));module.exports=r})();