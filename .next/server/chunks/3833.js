"use strict";exports.id=3833,exports.ids=[3833],exports.modules={53833:(e,s,a)=>{a.d(s,{c:()=>L});var l=a(95344),t=a(3729),r=a(56506),i=a(8428),c=a(91626),n=a(16212),m=a(92549),h=a(2273),x=a(89895),o=a(51354),d=a(71206),f=a(89486),u=a(78638),j=a(55794),p=a(13746),g=a(98200),N=a(28765),v=a(33037),w=a(71532),b=a(48120),y=a(14513),z=a(89410);function Z(){return(0,l.jsxs)(n.z,{variant:"ghost",className:"flex items-center gap-2",children:[l.jsx(z.default,{src:"/canada-flag.svg",alt:"Canada Flag",width:24,height:16,className:"rounded shadow-sm"}),l.jsx("span",{children:"English"})]})}var C=a(61351),k=a(62008),S=a(82885),I=a(76509),$=a(16802),F=a(20886);function L({children:e}){let s=(0,i.usePathname)(),a=(0,i.useRouter)(),[z,L]=(0,t.useState)(""),[E,J]=(0,t.useState)([]),[O,T]=(0,t.useState)(!1),[U,A]=(0,t.useState)(!1),[D,H]=(0,t.useState)(!1),[P,R]=(0,t.useState)(!1),[q,G]=(0,t.useState)(null);(0,t.useEffect)(()=>{let e=localStorage.getItem("user");e?G(JSON.parse(e)):a.push("/login")},[a]);let V=[{href:"/dashboard",icon:l.jsx(h.Z,{className:"h-5 w-5"}),label:"Dashboard"},{href:"/lead",icon:l.jsx(x.Z,{className:"h-5 w-5"}),label:"Lead"},...q?.permissions?.favorites?[{href:"/favorites",icon:l.jsx(o.Z,{className:"h-5 w-5"}),label:"Favorites"}]:[],{href:"/inbox",icon:l.jsx(d.Z,{className:"h-5 w-5"}),label:"Inbox"},{href:"/inventory",icon:l.jsx(f.Z,{className:"h-5 w-5"}),label:"Inventory"},{href:"/users",icon:l.jsx(x.Z,{className:"h-5 w-5"}),label:"Users"},{href:"/mls",icon:l.jsx(u.Z,{className:"h-5 w-5"}),label:"MLS"},{href:"/calendar",icon:l.jsx(j.Z,{className:"h-5 w-5"}),label:"Calendar"},{href:"/settings",icon:l.jsx(p.Z,{className:"h-5 w-5"}),label:"Settings"}],X=e=>{if(L(e),!e.trim()){J([]),T(!1);return}T(!0),J(k.c.search(e))},_=()=>{L(""),J([]),T(!1)},M=e=>{a.push(e.link),_(),H(!1)},Q=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),document.cookie="user=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",a.push("/")},W=async e=>{try{if(!(await fetch(`/api/users/${q._id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatar:e})})).ok)throw Error("Failed to update avatar");let s={...q,avatar:e};localStorage.setItem("user",JSON.stringify(s)),G(s)}catch(e){throw console.error("Error updating avatar:",e),e}};return q?(0,l.jsxs)("div",{className:"min-h-screen w-full bg-gray-50 flex flex-col",children:[l.jsx("header",{className:"lg:hidden sticky top-0 z-40 bg-white border-b w-full",children:(0,l.jsxs)("div",{className:"flex h-14 sm:h-16 items-center px-3 sm:px-4",children:[l.jsx(n.z,{variant:"ghost",size:"sm",className:"mr-2 -ml-1",onClick:()=>A(!U),children:l.jsx(g.Z,{className:"h-5 w-5"})}),(0,l.jsxs)("div",{className:"flex-1 flex items-center justify-between gap-2 sm:gap-4 min-w-0",children:[l.jsx(r.default,{href:"/dashboard",className:"font-semibold text-red-500 truncate text-sm sm:text-base",children:"Get Home Realty"}),(0,l.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[l.jsx(n.z,{variant:"ghost",size:"sm",onClick:()=>H(!0),className:"h-8 w-8 sm:h-9 sm:w-9",children:l.jsx(N.Z,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),(0,l.jsxs)(n.z,{variant:"ghost",size:"sm",className:"h-8 w-8 sm:h-9 sm:w-9 relative",children:[l.jsx(v.Z,{className:"h-4 w-4 sm:h-5 sm:w-5"}),l.jsx("span",{className:"absolute right-1.5 top-1.5 h-2 w-2 rounded-full bg-red-500"})]})]})]})]})}),D&&(0,l.jsxs)("div",{className:"fixed inset-0 z-50 bg-white flex flex-col",children:[l.jsx("div",{className:"border-b safe-top",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 p-3 sm:p-4",children:[l.jsx(n.z,{variant:"ghost",size:"sm",className:"h-8 w-8 sm:h-9 sm:w-9 -ml-1",onClick:()=>H(!1),children:l.jsx(w.Z,{className:"h-5 w-5"})}),(0,l.jsxs)("div",{className:"flex-1 relative min-w-0",children:[l.jsx(N.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),l.jsx(m.I,{type:"search",placeholder:"Search...",className:"w-full pl-9 h-9 sm:h-10 text-sm sm:text-base",value:z,onChange:e=>X(e.target.value),autoFocus:!0})]})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 safe-bottom",children:O&&E.map(e=>l.jsx(n.z,{variant:"ghost",className:"w-full justify-start text-left mb-2 h-auto py-2 px-3",onClick:()=>M(e),children:(0,l.jsxs)("div",{className:"w-full min-w-0",children:[l.jsx("div",{className:"font-medium truncate text-sm sm:text-base",children:e.title}),l.jsx("div",{className:"text-xs sm:text-sm text-gray-500 truncate",children:e.subtitle})]})},`${e.type}-${e.id}`))})]}),(0,l.jsxs)("div",{className:"flex-1 flex relative lg:h-[calc(100vh-0px)]",children:[(0,l.jsxs)("aside",{className:(0,c.cn)("fixed inset-y-0 left-0 z-40 w-[240px] sm:w-64 bg-white border-r transform transition-transform duration-200 ease-in-out lg:translate-x-0 lg:static safe-top safe-bottom",U?"translate-x-0":"-translate-x-full"),children:[l.jsx("div",{className:"flex h-14 sm:h-16 items-center border-b px-4",children:l.jsx(r.default,{href:"/dashboard",className:"font-semibold text-red-500 text-sm sm:text-base",children:"Get Home Realty"})}),(0,l.jsxs)("nav",{className:"flex flex-col h-[calc(100%-3.5rem)] sm:h-[calc(100%-4rem)] p-3 sm:p-4",children:[l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-1 gap-2 sm:space-y-1",children:V.map(e=>(0,l.jsxs)(r.default,{href:e.href,className:(0,c.cn)("flex items-center gap-2 rounded-lg px-3 py-2 text-gray-500 transition-colors hover:text-gray-900 text-sm sm:text-base",s===e.href?"bg-gray-100 text-gray-900":""),onClick:s=>{s.preventDefault(),A(!1),a.push(e.href)},children:[e.icon,l.jsx("span",{className:"truncate",children:e.label})]},e.href))}),l.jsx("div",{className:"flex-1"}),(0,l.jsxs)(n.z,{variant:"ghost",onClick:()=>{Q(),A(!1)},className:"w-full flex items-center gap-2 text-gray-500 hover:text-red-500 text-sm sm:text-base justify-start h-auto py-2",children:[l.jsx(b.Z,{className:"h-5 w-5 flex-shrink-0"}),l.jsx("span",{className:"truncate",children:"Logout"})]})]})]}),(0,l.jsxs)("main",{className:"flex-1 flex flex-col min-h-0 w-full",children:[(0,l.jsxs)("header",{className:"hidden lg:flex h-14 sm:h-16 items-center justify-between border-b bg-white px-4 sm:px-6 sticky top-0 z-30",children:[l.jsx("div",{className:"flex-1 flex items-center gap-4 max-w-xl",children:(0,l.jsxs)("div",{className:"relative w-full",children:[l.jsx(N.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),l.jsx(m.I,{type:"search",placeholder:"Search...",className:"w-full pl-9 pr-9 h-9 sm:h-10",value:z,onChange:e=>X(e.target.value)}),z&&l.jsx(n.z,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:_,children:l.jsx(y.Z,{className:"h-4 w-4"})}),O&&E.length>0&&l.jsx(C.Zb,{className:"absolute top-full left-0 right-0 mt-1 shadow-lg",children:l.jsx(C.aY,{className:"p-1 sm:p-2 max-h-[60vh] overflow-y-auto",children:E.map(e=>l.jsx(n.z,{variant:"ghost",className:"w-full justify-start text-left h-auto py-2 px-3",onClick:()=>M(e),children:(0,l.jsxs)("div",{className:"w-full min-w-0",children:[l.jsx("div",{className:"font-medium truncate",children:e.title}),l.jsx("div",{className:"text-sm text-gray-500 truncate",children:e.subtitle})]})},`${e.type}-${e.id}`))})})]})}),(0,l.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4 ml-4",children:[(0,l.jsxs)(n.z,{variant:"ghost",size:"sm",className:"h-8 w-8 sm:h-9 sm:w-9 relative",children:[l.jsx(v.Z,{className:"h-4 w-4 sm:h-5 sm:w-5"}),l.jsx("span",{className:"absolute right-1.5 top-1.5 h-2 w-2 rounded-full bg-red-500"})]}),l.jsx(Z,{}),(0,l.jsxs)(F.h_,{children:[l.jsx(F.$F,{asChild:!0,children:(0,l.jsxs)(n.z,{variant:"ghost",className:"flex items-center gap-2",children:[(0,l.jsxs)(S.qE,{className:"h-8 w-8",children:[l.jsx(S.F$,{src:q?.avatar,alt:q?.name}),l.jsx(S.Q5,{children:q?.name?.substring(0,2).toUpperCase()})]}),l.jsx("span",{className:"hidden md:inline-block",children:q?.name})]})}),(0,l.jsxs)(F.AW,{align:"end",className:"w-56",children:[(0,l.jsxs)(F.Xi,{onClick:()=>R(!0),children:[l.jsx(p.Z,{className:"mr-2 h-4 w-4"}),"Profile Settings"]}),l.jsx(F.VD,{}),(0,l.jsxs)(F.Xi,{onClick:Q,children:[l.jsx(b.Z,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 lg:p-6 safe-bottom",children:l.jsx("div",{className:"container mx-auto max-w-7xl",children:e})})]})]}),U&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>A(!1)}),q&&l.jsx($.Vq,{open:P,onOpenChange:R,children:l.jsx($.cZ,{className:"sm:max-w-[425px]",children:l.jsx(I.L,{user:q,onUpdateAvatar:W})})})]}):l.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50",children:l.jsx("div",{className:"text-gray-500",children:"Loading..."})})}}};