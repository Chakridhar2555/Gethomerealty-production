exports.id=9870,exports.ids=[9870],exports.modules={64723:(e,a,s)=>{Promise.resolve().then(s.bind(s,36232))},36232:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>q});var t=s(95344),r=s(3729),l=s(56506),i=s(8428),n=s(16212),o=s(92549),d=s(51354),c=s(78638),m=s(98200),x=s(28765),h=s(14513),f=s(61351),g=s(74331),p=s(62008),u=s(94672),y=s(98714),j=s(47180),N=s(99558),v=s(20886);function b(){let{setTheme:e}=(0,N.F)();return(0,t.jsxs)(v.h_,{children:[t.jsx(v.$F,{asChild:!0,children:(0,t.jsxs)(n.z,{variant:"outline",size:"icon",className:"border-gray-600 hover:bg-gray-700",children:[t.jsx(y.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),t.jsx(j.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),t.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,t.jsxs)(v.AW,{align:"end",className:"bg-gray-800 border-gray-700",children:[t.jsx(v.Xi,{onClick:()=>e("light"),className:"text-gray-300 hover:text-gray-100 hover:bg-gray-700",children:"Light"}),t.jsx(v.Xi,{onClick:()=>e("dark"),className:"text-gray-300 hover:text-gray-100 hover:bg-gray-700",children:"Dark"}),t.jsx(v.Xi,{onClick:()=>e("system"),className:"text-gray-300 hover:text-gray-100 hover:bg-gray-700",children:"System"})]})]})}function w({children:e,...a}){return t.jsx(N.f,{...a,children:e})}var k=s(2273),C=s(89895),S=s(55794),z=s(71206),Z=s(91917),E=s(13746),$=s(48120),_=s(33037),I=s(16595),O=s(91626);let T=I.fC,R=I.xz,V=r.forwardRef(({className:e,align:a="center",sideOffset:s=4,...r},l)=>t.jsx(I.h_,{children:t.jsx(I.VY,{ref:l,align:a,sideOffset:s,className:(0,O.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));V.displayName=I.VY.displayName;var L=s(49027);let M=r.forwardRef(({className:e,children:a,...s},r)=>(0,t.jsxs)(L.fC,{ref:r,className:(0,O.cn)("relative overflow-hidden",e),...s,children:[t.jsx(L.l_,{className:"h-full w-full rounded-[inherit]",children:a}),t.jsx(D,{}),t.jsx(L.Ns,{})]}));M.displayName=L.fC.displayName;let D=r.forwardRef(({className:e,orientation:a="vertical",...s},r)=>t.jsx(L.gb,{ref:r,orientation:a,className:(0,O.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...s,children:t.jsx(L.q4,{className:"relative flex-1 rounded-full bg-border"})}));D.displayName=L.gb.displayName;var F=s(25092),H=s(22156),J=s(99119);function P(){let[e,a]=(0,r.useState)([]),[s,l]=(0,r.useState)(!1),{toast:i}=(0,F.pm)(),o=async()=>{try{let e=localStorage.getItem("user");if(!e)return;let s=JSON.parse(e),t=await fetch(`/api/notifications?userId=${s._id}`),r=await t.json();if(!t.ok)throw Error();a(r)}catch(e){console.error("Error fetching notifications:",e)}};(0,r.useEffect)(()=>{o();let e=setInterval(o,3e4);return()=>clearInterval(e)},[]);let d=async e=>{try{if(!(await fetch("/api/notifications",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationId:e})})).ok)throw Error();a(a=>a.filter(a=>a._id!==e))}catch(e){i({variant:"destructive",title:"Error",description:"Failed to mark notification as read"})}};return(0,t.jsxs)(T,{open:s,onOpenChange:l,children:[t.jsx(R,{asChild:!0,children:(0,t.jsxs)(n.z,{variant:"ghost",size:"icon",className:"relative",children:[t.jsx(_.Z,{className:"h-5 w-5"}),e.length>0&&t.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs text-white",children:e.length})]})}),(0,t.jsxs)(V,{className:"w-80 p-0",align:"end",children:[t.jsx("div",{className:"p-4 border-b",children:t.jsx("h4",{className:"text-sm font-semibold",children:"Notifications"})}),t.jsx(M,{className:"h-[300px]",children:t.jsx(J.M,{mode:"popLayout",children:0===e.length?t.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"No new notifications"}):e.map(e=>t.jsx(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"p-4 border-b last:border-0",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[t.jsx("p",{className:"text-sm",children:e.message}),t.jsx("p",{className:"text-xs text-gray-500",children:(0,H.WU)(new Date(e.createdAt),"MMM dd, yyyy HH:mm")})]}),t.jsx(n.z,{variant:"ghost",size:"sm",onClick:()=>d(e._id),className:"text-xs",children:"Mark as read"})]})},e._id))})})]})]})}var U=s(82885),Y=s(76509),A=s(16802);let X=[{name:"Dashboard",href:"/user/dashboard",icon:k.Z,permission:"dashboard"},{name:"Leads",href:"/user/leads",icon:C.Z,permission:"leads"},{name:"Calendar",href:"/user/calendar",icon:S.Z,permission:"calendar"},{name:"Email",href:"/user/email",icon:z.Z,permission:"email"},{name:"Inventory",href:"/user/inventory",icon:Z.Z,permission:"inventory"},{name:"Settings",href:"/user/settings",icon:E.Z,permission:"settings"},{name:"Favorites",href:"/user/favorites",icon:d.Z,permission:"favorites"},{name:"MLS",href:"/user/mls",icon:c.Z,permission:"mls"}];function q({children:e}){let a=(0,i.usePathname)(),s=(0,i.useRouter)(),[d,c]=(0,r.useState)(""),[y,j]=(0,r.useState)([]),[N,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(null),[z,Z]=(0,r.useState)(null),[_,I]=(0,r.useState)(!1),[O,T]=(0,r.useState)(!1),[R,V]=(0,r.useState)(!1),[L,M]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("user");if(e){let a=JSON.parse(e);S(a),Z(a.permissions)}else s.push("/login")},[s]),(0,r.useEffect)(()=>{I(!0)},[]);let D=e=>{if(c(e),!e.trim()){j([]),k(!1);return}k(!0),j(p.c.search(e))},F=()=>{c(""),j([]),k(!1)},H=e=>{s.push(e.link),F()},J=async e=>{try{if(!(await fetch(`/api/users/${C._id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatar:e})})).ok)throw Error("Failed to update avatar");let a={...C,avatar:e};localStorage.setItem("user",JSON.stringify(a)),S(a)}catch(e){throw console.error("Error updating avatar:",e),e}},q=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),document.cookie="user=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",s.push("/")},W=()=>(0,t.jsxs)("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto bg-gray-800 px-6 ring-1 ring-white/5",children:[t.jsx("div",{className:"flex h-16 shrink-0 items-center",children:(0,t.jsxs)(l.default,{href:"/user/dashboard",className:"flex items-center",children:[t.jsx("span",{className:"text-2xl font-bold text-red-500",children:"GetHome"}),t.jsx("span",{className:"ml-2 text-xl font-semibold text-gray-200",children:"Realty"})]})}),t.jsx("nav",{className:"flex flex-1 flex-col",children:(0,t.jsxs)("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:[t.jsx("li",{children:t.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:X.map(e=>{if(!z[e.permission])return null;let s=a===e.href;return t.jsx(u.E.li,{whileHover:{x:4},children:(0,t.jsxs)(l.default,{href:e.href,className:`
                                group flex gap-x-3 rounded-md p-2 text-sm leading-6
                                ${s?"bg-gray-700 text-red-500":"text-gray-400 hover:text-red-500 hover:bg-gray-700"}
                              `,onClick:()=>V(!1),children:[t.jsx(e.icon,{className:`h-6 w-6 shrink-0 ${s?"text-red-500":"text-gray-400 group-hover:text-red-500"}`,"aria-hidden":"true"}),e.name]})},e.name)})})}),t.jsx("li",{className:"mt-auto",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx(b,{}),(0,t.jsxs)(n.z,{variant:"ghost",className:"group -mx-2 flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6 text-gray-400 hover:bg-gray-700 hover:text-red-500",onClick:q,children:[t.jsx($.Z,{className:"h-6 w-6 shrink-0 text-gray-400 group-hover:text-red-500","aria-hidden":"true"}),"Logout"]})]})})]})})]});return C&&z&&_?t.jsx(w,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,storageKey:"user-theme-preference",children:(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsxs)("div",{className:"flex",children:[t.jsx("div",{className:"hidden md:fixed md:inset-y-0 md:z-50 md:flex md:w-72 md:flex-col",children:t.jsx(W,{})}),t.jsx(g.yo,{open:R,onOpenChange:V,children:t.jsx(g.ue,{side:"left",className:"w-72 p-0",children:t.jsx(W,{})})}),(0,t.jsxs)("div",{className:"w-full md:pl-72",children:[(0,t.jsxs)("header",{className:"sticky top-0 z-30 flex h-16 items-center justify-between border-b border-gray-800 bg-gray-800/95 backdrop-blur px-4 md:px-6",children:[t.jsx("div",{className:"flex items-center gap-4 md:hidden",children:t.jsx(n.z,{variant:"ghost",size:"icon",onClick:()=>V(!0),children:t.jsx(m.Z,{className:"h-6 w-6 text-gray-400"})})}),t.jsx("div",{className:"hidden md:flex md:flex-1 md:items-center md:gap-4",children:(0,t.jsxs)("div",{className:"relative w-full max-w-md",children:[t.jsx(x.Z,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-400"}),t.jsx(o.I,{type:"search",placeholder:"Search...",className:"w-full pl-8 bg-gray-700/50 border-gray-600 text-gray-100 focus:bg-gray-700",value:d,onChange:e=>D(e.target.value)}),d&&t.jsx(n.z,{variant:"ghost",size:"icon",className:"absolute right-1 top-1 h-7 w-7 text-gray-400 hover:text-gray-100",onClick:F,children:t.jsx(h.Z,{className:"h-4 w-4"})}),N&&y.length>0&&t.jsx(f.Zb,{className:"absolute top-full left-0 w-full mt-2 bg-gray-800 border-gray-700",children:t.jsx(f.aY,{className:"p-2",children:y.map(e=>t.jsx(n.z,{variant:"ghost",className:"w-full justify-start text-left px-2 py-1.5 text-gray-100 hover:bg-gray-700",onClick:()=>H(e),children:(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:e.title}),t.jsx("div",{className:"text-sm text-gray-400",children:e.subtitle})]})},`${e.type}-${e.id}`))})})]})}),t.jsx(n.z,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>M(!L),children:t.jsx(x.Z,{className:"h-5 w-5 text-gray-400"})}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx(P,{}),(0,t.jsxs)(v.h_,{children:[t.jsx(v.$F,{asChild:!0,children:(0,t.jsxs)(n.z,{variant:"ghost",className:"flex items-center gap-2 text-gray-100 hover:text-gray-300",children:[(0,t.jsxs)(U.qE,{className:"h-8 w-8",children:[t.jsx(U.F$,{src:C?.avatar,alt:C?.name}),t.jsx(U.Q5,{children:C?.name?.substring(0,2).toUpperCase()})]}),t.jsx("span",{className:"hidden md:inline-block",children:C?.name})]})}),(0,t.jsxs)(v.AW,{align:"end",className:"w-56",children:[(0,t.jsxs)(v.Xi,{onClick:()=>T(!0),children:[t.jsx(E.Z,{className:"mr-2 h-4 w-4"}),"Profile Settings"]}),t.jsx(v.VD,{}),(0,t.jsxs)(v.Xi,{onClick:q,children:[t.jsx($.Z,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})]})]}),L&&(0,t.jsxs)("div",{className:"p-4 border-b border-gray-800 md:hidden",children:[(0,t.jsxs)("div",{className:"relative",children:[t.jsx(x.Z,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-400"}),t.jsx(o.I,{type:"search",placeholder:"Search...",className:"w-full pl-8 bg-gray-700/50 border-gray-600 text-gray-100 focus:bg-gray-700",value:d,onChange:e=>D(e.target.value)}),d&&t.jsx(n.z,{variant:"ghost",size:"icon",className:"absolute right-1 top-1 h-7 w-7 text-gray-400 hover:text-gray-100",onClick:F,children:t.jsx(h.Z,{className:"h-4 w-4"})})]}),N&&y.length>0&&t.jsx(f.Zb,{className:"mt-2 bg-gray-800 border-gray-700",children:t.jsx(f.aY,{className:"p-2",children:y.map(e=>t.jsx(n.z,{variant:"ghost",className:"w-full justify-start text-left px-2 py-1.5 text-gray-100 hover:bg-gray-700",onClick:()=>{H(e),M(!1)},children:(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:e.title}),t.jsx("div",{className:"text-sm text-gray-400",children:e.subtitle})]})},`${e.type}-${e.id}`))})})]}),t.jsx("main",{className:"flex-1 overflow-auto p-4 md:p-6",children:e})]})]}),C&&t.jsx(A.Vq,{open:O,onOpenChange:T,children:t.jsx(A.cZ,{className:"sm:max-w-[425px]",children:t.jsx(Y.L,{user:C,onUpdateAvatar:J})})})]})}):t.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-900",children:t.jsx("div",{className:"text-gray-100",children:"Loading..."})})}},74331:(e,a,s)=>{"use strict";s.d(a,{Tu:()=>g,aM:()=>c,bC:()=>p,ue:()=>f,yo:()=>d});var t=s(95344),r=s(3729),l=s(88794),i=s(49247),n=s(14513),o=s(91626);let d=l.fC,c=l.xz;l.x8;let m=l.h_,x=r.forwardRef(({className:e,...a},s)=>t.jsx(l.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:s}));x.displayName=l.aV.displayName;let h=(0,i.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),f=r.forwardRef(({side:e="right",className:a,children:s,...r},i)=>(0,t.jsxs)(m,{children:[t.jsx(x,{}),(0,t.jsxs)(l.VY,{ref:i,className:(0,o.cn)(h({side:e}),a),...r,children:[s,(0,t.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[t.jsx(n.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));f.displayName=l.VY.displayName;let g=({className:e,...a})=>t.jsx("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...a});g.displayName="SheetHeader";let p=r.forwardRef(({className:e,...a},s)=>t.jsx(l.Dx,{ref:s,className:(0,o.cn)("text-lg font-semibold text-foreground",e),...a}));p.displayName=l.Dx.displayName,r.forwardRef(({className:e,...a},s)=>t.jsx(l.dk,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",e),...a})).displayName=l.dk.displayName},44976:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let t=(0,s(86843).createProxy)(String.raw`/Users/chakrinaidu/Desktop/Gethomerealty-production/app/user/layout.tsx`),{__esModule:r,$$typeof:l}=t,i=t.default}};