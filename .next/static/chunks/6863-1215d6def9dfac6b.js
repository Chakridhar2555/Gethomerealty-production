"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6863],{26863:function(e,s,a){a.d(s,{c:function(){return L}});var l=a(3827),t=a(64090),r=a(8792),i=a(47907),c=a(1657),n=a(85754),m=a(45179),h=a(5423),o=a(34059),x=a(55211),d=a(90684),f=a(42527),u=a(77326),j=a(97307),p=a(29910),g=a(79744),N=a(28670),v=a(43345),w=a(49108),b=a(81049),y=a(52235),k=a(20703);function C(){return(0,l.jsxs)(n.z,{variant:"ghost",className:"flex items-center gap-2",children:[(0,l.jsx)(k.default,{src:"/canada-flag.svg",alt:"Canada Flag",width:24,height:16,className:"rounded shadow-sm"}),(0,l.jsx)("span",{children:"English"})]})}var z=a(27815),Z=a(28877),S=a(50660),I=a(99812),E=a(42706),F=a(93930);function L(e){var s,a;let{children:k}=e,L=(0,i.usePathname)(),_=(0,i.useRouter)(),[J,O]=(0,t.useState)(""),[T,U]=(0,t.useState)([]),[A,D]=(0,t.useState)(!1),[H,P]=(0,t.useState)(!1),[R,q]=(0,t.useState)(!1),[G,V]=(0,t.useState)(!1),[X,$]=(0,t.useState)(null);(0,t.useEffect)(()=>{let e=localStorage.getItem("user");e?$(JSON.parse(e)):_.push("/login")},[_]);let M=[{href:"/dashboard",icon:(0,l.jsx)(h.Z,{className:"h-5 w-5"}),label:"Dashboard"},{href:"/lead",icon:(0,l.jsx)(o.Z,{className:"h-5 w-5"}),label:"Lead"},...(null==X?void 0:null===(s=X.permissions)||void 0===s?void 0:s.favorites)?[{href:"/favorites",icon:(0,l.jsx)(x.Z,{className:"h-5 w-5"}),label:"Favorites"}]:[],{href:"/inbox",icon:(0,l.jsx)(d.Z,{className:"h-5 w-5"}),label:"Inbox"},{href:"/inventory",icon:(0,l.jsx)(f.Z,{className:"h-5 w-5"}),label:"Inventory"},{href:"/users",icon:(0,l.jsx)(o.Z,{className:"h-5 w-5"}),label:"Users"},{href:"/mls",icon:(0,l.jsx)(u.Z,{className:"h-5 w-5"}),label:"MLS"},{href:"/calendar",icon:(0,l.jsx)(j.Z,{className:"h-5 w-5"}),label:"Calendar"},{href:"/settings",icon:(0,l.jsx)(p.Z,{className:"h-5 w-5"}),label:"Settings"}],Q=e=>{if(O(e),!e.trim()){U([]),D(!1);return}D(!0),U(Z.c.search(e))},W=()=>{O(""),U([]),D(!1)},Y=e=>{_.push(e.link),W(),q(!1)},B=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),document.cookie="user=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",_.push("/")},K=async e=>{try{if(!(await fetch("/api/users/".concat(X._id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatar:e})})).ok)throw Error("Failed to update avatar");let s={...X,avatar:e};localStorage.setItem("user",JSON.stringify(s)),$(s)}catch(e){throw console.error("Error updating avatar:",e),e}};return X?(0,l.jsxs)("div",{className:"min-h-screen w-full bg-gray-50 flex flex-col",children:[(0,l.jsx)("header",{className:"lg:hidden sticky top-0 z-40 bg-white border-b w-full",children:(0,l.jsxs)("div",{className:"flex h-14 sm:h-16 items-center px-3 sm:px-4",children:[(0,l.jsx)(n.z,{variant:"ghost",size:"sm",className:"mr-2 -ml-1",onClick:()=>P(!H),children:(0,l.jsx)(g.Z,{className:"h-5 w-5"})}),(0,l.jsxs)("div",{className:"flex-1 flex items-center justify-between gap-2 sm:gap-4 min-w-0",children:[(0,l.jsx)(r.default,{href:"/dashboard",className:"font-semibold text-red-500 truncate text-sm sm:text-base",children:"Get Home Realty"}),(0,l.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,l.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>q(!0),className:"h-8 w-8 sm:h-9 sm:w-9",children:(0,l.jsx)(N.Z,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),(0,l.jsxs)(n.z,{variant:"ghost",size:"sm",className:"h-8 w-8 sm:h-9 sm:w-9 relative",children:[(0,l.jsx)(v.Z,{className:"h-4 w-4 sm:h-5 sm:w-5"}),(0,l.jsx)("span",{className:"absolute right-1.5 top-1.5 h-2 w-2 rounded-full bg-red-500"})]})]})]})]})}),R&&(0,l.jsxs)("div",{className:"fixed inset-0 z-50 bg-white flex flex-col",children:[(0,l.jsx)("div",{className:"border-b safe-top",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 p-3 sm:p-4",children:[(0,l.jsx)(n.z,{variant:"ghost",size:"sm",className:"h-8 w-8 sm:h-9 sm:w-9 -ml-1",onClick:()=>q(!1),children:(0,l.jsx)(w.Z,{className:"h-5 w-5"})}),(0,l.jsxs)("div",{className:"flex-1 relative min-w-0",children:[(0,l.jsx)(N.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),(0,l.jsx)(m.I,{type:"search",placeholder:"Search...",className:"w-full pl-9 h-9 sm:h-10 text-sm sm:text-base",value:J,onChange:e=>Q(e.target.value),autoFocus:!0})]})]})}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 safe-bottom",children:A&&T.map(e=>(0,l.jsx)(n.z,{variant:"ghost",className:"w-full justify-start text-left mb-2 h-auto py-2 px-3",onClick:()=>Y(e),children:(0,l.jsxs)("div",{className:"w-full min-w-0",children:[(0,l.jsx)("div",{className:"font-medium truncate text-sm sm:text-base",children:e.title}),(0,l.jsx)("div",{className:"text-xs sm:text-sm text-gray-500 truncate",children:e.subtitle})]})},"".concat(e.type,"-").concat(e.id)))})]}),(0,l.jsxs)("div",{className:"flex-1 flex relative lg:h-[calc(100vh-0px)]",children:[(0,l.jsxs)("aside",{className:(0,c.cn)("fixed inset-y-0 left-0 z-40 w-[240px] sm:w-64 bg-white border-r transform transition-transform duration-200 ease-in-out lg:translate-x-0 lg:static safe-top safe-bottom",H?"translate-x-0":"-translate-x-full"),children:[(0,l.jsx)("div",{className:"flex h-14 sm:h-16 items-center border-b px-4",children:(0,l.jsx)(r.default,{href:"/dashboard",className:"font-semibold text-red-500 text-sm sm:text-base",children:"Get Home Realty"})}),(0,l.jsxs)("nav",{className:"flex flex-col h-[calc(100%-3.5rem)] sm:h-[calc(100%-4rem)] p-3 sm:p-4",children:[(0,l.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-1 gap-2 sm:space-y-1",children:M.map(e=>(0,l.jsxs)(r.default,{href:e.href,className:(0,c.cn)("flex items-center gap-2 rounded-lg px-3 py-2 text-gray-500 transition-colors hover:text-gray-900 text-sm sm:text-base",L===e.href?"bg-gray-100 text-gray-900":""),onClick:s=>{s.preventDefault(),P(!1),_.push(e.href)},children:[e.icon,(0,l.jsx)("span",{className:"truncate",children:e.label})]},e.href))}),(0,l.jsx)("div",{className:"flex-1"}),(0,l.jsxs)(n.z,{variant:"ghost",onClick:()=>{B(),P(!1)},className:"w-full flex items-center gap-2 text-gray-500 hover:text-red-500 text-sm sm:text-base justify-start h-auto py-2",children:[(0,l.jsx)(b.Z,{className:"h-5 w-5 flex-shrink-0"}),(0,l.jsx)("span",{className:"truncate",children:"Logout"})]})]})]}),(0,l.jsxs)("main",{className:"flex-1 flex flex-col min-h-0 w-full",children:[(0,l.jsxs)("header",{className:"hidden lg:flex h-14 sm:h-16 items-center justify-between border-b bg-white px-4 sm:px-6 sticky top-0 z-30",children:[(0,l.jsx)("div",{className:"flex-1 flex items-center gap-4 max-w-xl",children:(0,l.jsxs)("div",{className:"relative w-full",children:[(0,l.jsx)(N.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),(0,l.jsx)(m.I,{type:"search",placeholder:"Search...",className:"w-full pl-9 pr-9 h-9 sm:h-10",value:J,onChange:e=>Q(e.target.value)}),J&&(0,l.jsx)(n.z,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:W,children:(0,l.jsx)(y.Z,{className:"h-4 w-4"})}),A&&T.length>0&&(0,l.jsx)(z.Zb,{className:"absolute top-full left-0 right-0 mt-1 shadow-lg",children:(0,l.jsx)(z.aY,{className:"p-1 sm:p-2 max-h-[60vh] overflow-y-auto",children:T.map(e=>(0,l.jsx)(n.z,{variant:"ghost",className:"w-full justify-start text-left h-auto py-2 px-3",onClick:()=>Y(e),children:(0,l.jsxs)("div",{className:"w-full min-w-0",children:[(0,l.jsx)("div",{className:"font-medium truncate",children:e.title}),(0,l.jsx)("div",{className:"text-sm text-gray-500 truncate",children:e.subtitle})]})},"".concat(e.type,"-").concat(e.id)))})})]})}),(0,l.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4 ml-4",children:[(0,l.jsxs)(n.z,{variant:"ghost",size:"sm",className:"h-8 w-8 sm:h-9 sm:w-9 relative",children:[(0,l.jsx)(v.Z,{className:"h-4 w-4 sm:h-5 sm:w-5"}),(0,l.jsx)("span",{className:"absolute right-1.5 top-1.5 h-2 w-2 rounded-full bg-red-500"})]}),(0,l.jsx)(C,{}),(0,l.jsxs)(F.h_,{children:[(0,l.jsx)(F.$F,{asChild:!0,children:(0,l.jsxs)(n.z,{variant:"ghost",className:"flex items-center gap-2",children:[(0,l.jsxs)(S.qE,{className:"h-8 w-8",children:[(0,l.jsx)(S.F$,{src:null==X?void 0:X.avatar,alt:null==X?void 0:X.name}),(0,l.jsx)(S.Q5,{children:null==X?void 0:null===(a=X.name)||void 0===a?void 0:a.substring(0,2).toUpperCase()})]}),(0,l.jsx)("span",{className:"hidden md:inline-block",children:null==X?void 0:X.name})]})}),(0,l.jsxs)(F.AW,{align:"end",className:"w-56",children:[(0,l.jsxs)(F.Xi,{onClick:()=>V(!0),children:[(0,l.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Profile Settings"]}),(0,l.jsx)(F.VD,{}),(0,l.jsxs)(F.Xi,{onClick:B,children:[(0,l.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 lg:p-6 safe-bottom",children:(0,l.jsx)("div",{className:"container mx-auto max-w-7xl",children:k})})]})]}),H&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>P(!1)}),X&&(0,l.jsx)(E.Vq,{open:G,onOpenChange:V,children:(0,l.jsx)(E.cZ,{className:"sm:max-w-[425px]",children:(0,l.jsx)(I.L,{user:X,onUpdateAvatar:K})})})]}):(0,l.jsx)("div",{className:"flex h-screen items-center justify-center bg-gray-50",children:(0,l.jsx)("div",{className:"text-gray-500",children:"Loading..."})})}}}]);