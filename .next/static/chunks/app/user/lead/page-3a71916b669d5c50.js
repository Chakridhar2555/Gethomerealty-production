(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5917],{84588:function(e,t,s){Promise.resolve().then(s.bind(s,78954))},78954:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v},dynamic:function(){return p},fetchCache:function(){return g},revalidate:function(){return N}});var a=s(3827),r=s(64090),l=s(47907),c=s(26863),n=s(27815),i=s(85754),d=s(47788),o=s(19160),u=s(63854),x=s(85904),h=s(90684),m=s(62457),f=s(37841),y=s(55421),j=s(50489);let p="force-dynamic",g="force-no-store",N=0;function v(){let e=(0,l.useRouter)(),{toast:t}=(0,d.pm)(),[s,p]=(0,r.useState)([]),[g,N]=(0,r.useState)(!0);(0,r.useEffect)(()=>{v()},[]);let v=async()=>{try{let t=localStorage.getItem("user");if(!t){e.push("/login");return}let s=JSON.parse(t),a=await fetch("/api/leads?assignedTo=".concat(s._id)),r=await a.json();p(r.filter(e=>e.assignedTo===s._id)),N(!1)}catch(e){console.error("Error fetching leads:",e),t({variant:"destructive",title:"Error",description:"Failed to fetch leads"}),N(!1)}},b=async e=>{try{if(!(await fetch("/api/leads/".concat(e),{method:"DELETE"})).ok)throw Error();t({title:"Success",description:"Lead deleted successfully"}),v()}catch(e){t({variant:"destructive",title:"Error",description:"Failed to delete lead"})}},w=e=>{switch(e.toLowerCase()){case"cold":return"text-blue-400 bg-blue-400/10";case"warm":return"text-yellow-400 bg-yellow-400/10";case"hot":return"text-red-400 bg-red-400/10";case"mild":return"text-green-400 bg-green-400/10";default:return"text-gray-400 bg-gray-400/10"}};return g?(0,a.jsx)(c.c,{children:(0,a.jsxs)("div",{className:"p-6 animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 w-48 bg-gray-800 rounded mb-6"}),(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"h-16 bg-gray-800 rounded"},t))})]})}):(0,a.jsx)(c.c,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-100",children:"Leads"}),(0,a.jsxs)(i.z,{onClick:()=>e.push("/user/lead/new"),className:"bg-red-500 hover:bg-red-600",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Add New Lead"]})]}),(0,a.jsxs)(n.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{className:"text-gray-100",children:"All Leads"})}),(0,a.jsx)(n.aY,{children:(0,a.jsxs)(o.iA,{children:[(0,a.jsx)(o.xD,{children:(0,a.jsxs)(o.SC,{className:"border-gray-700",children:[(0,a.jsx)(o.ss,{className:"text-gray-400",children:"Name"}),(0,a.jsx)(o.ss,{className:"text-gray-400",children:"Contact"}),(0,a.jsx)(o.ss,{className:"text-gray-400",children:"Status"}),(0,a.jsx)(o.ss,{className:"text-gray-400",children:"Type"}),(0,a.jsx)(o.ss,{className:"text-gray-400",children:"Source"}),(0,a.jsx)(o.ss,{className:"text-gray-400",children:"Created"}),(0,a.jsx)(o.ss,{className:"text-gray-400 text-right",children:"Actions"})]})}),(0,a.jsx)(o.RM,{children:0===s.length?(0,a.jsx)(o.SC,{children:(0,a.jsx)(o.pj,{colSpan:7,className:"text-center text-gray-400 py-4",children:"No leads found"})}):s.map(t=>(0,a.jsxs)(o.SC,{className:"border-gray-700",children:[(0,a.jsx)(o.pj,{className:"font-medium text-gray-100",children:(0,a.jsx)(i.z,{variant:"link",className:"p-0 h-auto font-medium text-gray-100 hover:text-gray-300",onClick:()=>e.push("/user/lead/".concat(t._id)),children:t.name})}),(0,a.jsx)(o.pj,{children:(0,a.jsxs)("div",{className:"space-y-1 text-gray-300",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2 text-gray-400"}),t.phone]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2 text-gray-400"}),t.email]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2 text-gray-400"}),t.address]})]})}),(0,a.jsx)(o.pj,{children:(0,a.jsx)("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(w(t.leadStatus)),children:t.leadStatus.charAt(0).toUpperCase()+t.leadStatus.slice(1)})}),(0,a.jsx)(o.pj,{className:"text-gray-300",children:t.leadType}),(0,a.jsx)(o.pj,{className:"text-gray-300",children:t.source}),(0,a.jsx)(o.pj,{className:"text-gray-300",children:new Date(t.createdAt).toLocaleDateString()}),(0,a.jsx)(o.pj,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>e.push("/user/lead/".concat(t._id)),className:"h-8 w-8 p-0",children:(0,a.jsx)(f.Z,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>e.push("/user/lead/".concat(t._id,"/edit")),className:"h-8 w-8 p-0",children:(0,a.jsx)(y.Z,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>b(t._id),className:"h-8 w-8 p-0 hover:text-red-400",children:(0,a.jsx)(j.Z,{className:"h-4 w-4"})})]})})]},t._id))})]})})]})]})})}},19160:function(e,t,s){"use strict";s.d(t,{RM:function(){return i},SC:function(){return d},iA:function(){return c},pj:function(){return u},ss:function(){return o},xD:function(){return n}});var a=s(3827),r=s(64090),l=s(1657);let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",s),...r})})});c.displayName="Table";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",s),...r})});n.displayName="TableHeader";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",s),...r})});i.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});d.displayName="TableRow";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});o.displayName="TableHead";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});u.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption"},49108:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(57977).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},37841:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(57977).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},42527:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(57977).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},62457:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(57977).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},55421:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(57977).Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},85904:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(57977).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},50489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(57977).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},63854:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(57977).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])}},function(e){e.O(0,[6860,9593,8792,162,703,9096,4011,6863,2971,8069,1744],function(){return e(e.s=84588)}),_N_E=e.O()}]);