(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3971],{74668:function(e,r,a){Promise.resolve().then(a.bind(a,61996))},61996:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return F}});var s=a(3827),t=a(64090),l=a(47907),i=a(20703),n=a(85754),o=a(45179),d=a(49842),c=a(23444),u=a(27815),m=a(26863),h=a(53879),p=a(42527),x=a(62457),g=a(48219),y=a(29467),f=a(57842),v=a(77326),j=a(65561),b=a(52235),N=a(97336),w=a(37841),k=a(79580),Z=a(28877);function F(e){let{params:r}=e,a=(0,l.useRouter)(),[F,C]=(0,t.useState)(!1),[I,_]=(0,t.useState)(""),[E,M]=(0,t.useState)([]),[P,q]=(0,t.useState)([]),[z,A]=(0,t.useState)({propertyName:"",propertyType:"house",address:"",price:"",squareFootage:"",bedrooms:"",bathrooms:"",yearBuilt:"",description:"",features:"",status:"available",images:[],image360:[]});(0,t.useEffect)(()=>{B()},[r.id]);let B=async()=>{try{let e=Z.c.getProperty(r.id);e&&(A({propertyName:e.propertyName,propertyType:e.propertyType,address:e.address,price:e.price,squareFootage:e.squareFootage,bedrooms:e.bedrooms,bathrooms:e.bathrooms,yearBuilt:e.yearBuilt,description:e.description,features:e.features,status:e.status,images:e.images||[],image360:e.image360||[]}),_(e.mainImage||""),M(e.images||[]),q(e.image360||[]))}catch(e){console.error("Error fetching property:",e),a.push("/inventory")}},L=(e,r)=>{A(a=>({...a,[e]:r}))},R=e=>{M(r=>r.filter((r,a)=>a!==e)),A(r=>({...r,images:r.images.filter((r,a)=>a!==e)}))},S=e=>{q(r=>r.filter((r,a)=>a!==e)),A(r=>({...r,image360:r.image360.filter((r,a)=>a!==e)}))},T=async()=>{try{C(!0),Z.c.updateProperty(r.id,{...z,id:r.id,mainImage:I,images:E,image360:P}),a.push("/inventory")}catch(e){console.error("Error updating property:",e)}finally{C(!1)}};return(0,s.jsx)(m.c,{children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsxs)(n.z,{variant:"ghost",onClick:()=>a.back(),children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Back to Inventory"]}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Edit Property"})]}),(0,s.jsx)(u.Zb,{className:"p-6",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"propertyType",children:"Property Type"}),(0,s.jsxs)("select",{id:"propertyType",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",value:z.propertyType,onChange:e=>L("propertyType",e.target.value),children:[(0,s.jsx)("option",{value:"house",children:"House"}),(0,s.jsx)("option",{value:"apartment",children:"Apartment"}),(0,s.jsx)("option",{value:"condo",children:"Condo"}),(0,s.jsx)("option",{value:"land",children:"Land"}),(0,s.jsx)("option",{value:"commercial",children:"Commercial"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"propertyName",children:"Property Name"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(p.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-500"}),(0,s.jsx)(o.I,{id:"propertyName",value:z.propertyName,onChange:e=>L("propertyName",e.target.value),placeholder:"Enter property name",className:"pl-10"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"address",children:"Address"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-500"}),(0,s.jsx)(o.I,{id:"address",value:z.address,onChange:e=>L("address",e.target.value),placeholder:"Enter property address",className:"pl-10"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"price",children:"Price"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(g.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-500"}),(0,s.jsx)(o.I,{id:"price",type:"number",value:z.price,onChange:e=>L("price",e.target.value),placeholder:"Enter price",className:"pl-10"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"squareFootage",children:"Square Footage"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(y.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-500"}),(0,s.jsx)(o.I,{id:"squareFootage",type:"number",value:z.squareFootage,onChange:e=>L("squareFootage",e.target.value),placeholder:"Enter square footage",className:"pl-10"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"bedrooms",children:"Bedrooms"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-500"}),(0,s.jsx)(o.I,{id:"bedrooms",type:"number",value:z.bedrooms,onChange:e=>L("bedrooms",e.target.value),placeholder:"Number of bedrooms",className:"pl-10"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"bathrooms",children:"Bathrooms"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-500"}),(0,s.jsx)(o.I,{id:"bathrooms",type:"number",value:z.bathrooms,onChange:e=>L("bathrooms",e.target.value),placeholder:"Number of bathrooms",className:"pl-10"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"yearBuilt",children:"Year Built"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(v.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-500"}),(0,s.jsx)(o.I,{id:"yearBuilt",type:"number",value:z.yearBuilt,onChange:e=>L("yearBuilt",e.target.value),placeholder:"Year built",className:"pl-10"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"description",children:"Description"}),(0,s.jsx)(c.g,{id:"description",value:z.description,onChange:e=>L("description",e.target.value),placeholder:"Enter property description",rows:3})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"features",children:"Features"}),(0,s.jsx)(c.g,{id:"features",value:z.features,onChange:e=>L("features",e.target.value),placeholder:"Enter property features (e.g., garage, pool, renovated kitchen)",rows:3})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"status",children:"Status"}),(0,s.jsxs)("select",{id:"status",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",value:z.status,onChange:e=>L("status",e.target.value),children:[(0,s.jsx)("option",{value:"available",children:"Available"}),(0,s.jsx)("option",{value:"pending",children:"Pending"}),(0,s.jsx)("option",{value:"sold",children:"Sold"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Property Images"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"mainImage",children:"Main Property Image"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(o.I,{id:"mainImage",type:"file",accept:"image/*",onChange:e=>{var r;let a=null===(r=e.target.files)||void 0===r?void 0:r[0];if(a){let e=new FileReader;e.onloadend=()=>{let r=e.result;_(r),A(e=>({...e,mainImage:r}))},e.readAsDataURL(a)}},className:"hidden"}),(0,s.jsx)(d._,{htmlFor:"mainImage",className:"flex items-center justify-center w-32 h-32 border-2 border-dashed rounded-lg cursor-pointer hover:border-primary",children:I?(0,s.jsx)(i.default,{src:I,alt:"Main property image",width:128,height:128,className:"object-cover rounded-lg"}):(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(j.Z,{className:"w-8 h-8 text-gray-400"}),(0,s.jsx)("span",{className:"mt-2 text-sm text-gray-500",children:"Main Image"})]})})]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"propertyImages",children:"Additional Property Images"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[E.map((e,r)=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.default,{src:e,alt:"Property image ".concat(r+1),width:128,height:128,className:"object-cover rounded-lg"}),(0,s.jsx)(n.z,{size:"icon",variant:"destructive",className:"absolute -top-2 -right-2 w-6 h-6",onClick:()=>R(r),children:(0,s.jsx)(b.Z,{className:"w-4 h-4"})})]},r)),(0,s.jsx)(o.I,{id:"propertyImages",type:"file",accept:"image/*",multiple:!0,onChange:e=>{let r=e.target.files;r&&Array.from(r).forEach(e=>{let r=new FileReader;r.onloadend=()=>{let e=r.result;M(r=>[...r,e]),A(r=>({...r,images:[...r.images,e]}))},r.readAsDataURL(e)})},className:"hidden"}),(0,s.jsxs)(d._,{htmlFor:"propertyImages",className:"flex flex-col items-center justify-center w-32 h-32 border-2 border-dashed rounded-lg cursor-pointer hover:border-primary",children:[(0,s.jsx)(N.Z,{className:"w-8 h-8 text-gray-400"}),(0,s.jsx)("span",{className:"mt-2 text-sm text-gray-500",children:"Add Photos"})]})]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"360images",children:"360\xb0 Views"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[P.map((e,r)=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.default,{src:e,alt:"360\xb0 view ".concat(r+1),width:128,height:128,className:"object-cover rounded-lg"}),(0,s.jsx)(n.z,{size:"icon",variant:"destructive",className:"absolute -top-2 -right-2 w-6 h-6",onClick:()=>S(r),children:(0,s.jsx)(b.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"absolute bottom-2 right-2 bg-black/50 rounded-full p-1",children:(0,s.jsx)(w.Z,{className:"w-4 h-4 text-white"})})]},r)),(0,s.jsx)(o.I,{id:"360images",type:"file",accept:"image/*",multiple:!0,onChange:e=>{let r=e.target.files;r&&Array.from(r).forEach(e=>{let r=new FileReader;r.onloadend=()=>{let e=r.result;q(r=>[...r,e]),A(r=>({...r,image360:[...r.image360,e]}))},r.readAsDataURL(e)})},className:"hidden"}),(0,s.jsxs)(d._,{htmlFor:"360images",className:"flex flex-col items-center justify-center w-32 h-32 border-2 border-dashed rounded-lg cursor-pointer hover:border-primary",children:[(0,s.jsx)(w.Z,{className:"w-8 h-8 text-gray-400"}),(0,s.jsx)("span",{className:"mt-2 text-sm text-gray-500",children:"Add 360\xb0 Views"})]})]})})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)(n.z,{variant:"outline",onClick:()=>a.back(),children:"Cancel"}),(0,s.jsx)(n.z,{onClick:T,disabled:F,children:F?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})]})})}},49842:function(e,r,a){"use strict";a.d(r,{_:function(){return d}});var s=a(3827),t=a(64090),l=a(24602),i=a(49769),n=a(1657);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)(l.f,{ref:r,className:(0,n.cn)(o(),a),...t})});d.displayName=l.f.displayName},23444:function(e,r,a){"use strict";a.d(r,{g:function(){return i}});var s=a(3827),t=a(64090),l=a(1657);let i=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:r,...t})});i.displayName="Textarea"},53879:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(57977).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},97336:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(57977).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},49108:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(57977).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},48219:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(57977).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},37841:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(57977).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},57842:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(57977).Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]])},42527:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(57977).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},65561:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(57977).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},79580:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(57977).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},62457:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(57977).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},29467:function(e,r,a){"use strict";a.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(57977).Z)("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]])},24602:function(e,r,a){"use strict";a.d(r,{f:function(){return n}});var s=a(64090),t=a(29586),l=a(3827),i=s.forwardRef((e,r)=>(0,l.jsx)(t.WV.label,{...e,ref:r,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));i.displayName="Label";var n=i}},function(e){e.O(0,[6860,9593,8792,162,703,9096,4011,6863,2971,8069,1744],function(){return e(e.s=74668)}),_N_E=e.O()}]);