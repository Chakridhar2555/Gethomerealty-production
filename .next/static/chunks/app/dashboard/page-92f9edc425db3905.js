(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{51517:function(e,t,s){Promise.resolve().then(s.bind(s,60632))},60632:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var r=s(3827),l=s(24232),n=s(64090),a=s(47907),i=s(79949),d=s(26863),c=s(85754),o=s(27815),u=s(64178),x=s(34059),f=s(97307),h=s(26490),m=s(19175),j=s(59886),y=s(62985),p=s(25890),g=s(19160);let b=(0,l.default)(()=>Promise.all([s.e(9682),s.e(8233)]).then(s.bind(s,81884)).then(e=>e.default),{loadableGenerated:{webpack:()=>[81884]},loading:()=>(0,r.jsx)("div",{className:"h-[400px] flex items-center justify-center",children:"Loading calendar..."}),ssr:!1}),N=(0,i.E)(g.SC);function v(e){let{metrics:t}=e,s={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,r.jsxs)(i.E.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",children:[(0,r.jsx)(i.E.div,{variants:s,children:(0,r.jsx)(o.Zb,{children:(0,r.jsxs)(o.aY,{className:"flex items-center p-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 mr-4",children:(0,r.jsx)(u.Z,{className:"w-6 h-6 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Tasks"}),(0,r.jsx)("h2",{className:"text-2xl font-bold",children:t.totalTasks})]})]})})}),(0,r.jsx)(i.E.div,{variants:s,children:(0,r.jsx)(o.Zb,{children:(0,r.jsxs)(o.aY,{className:"flex items-center p-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-green-100 mr-4",children:(0,r.jsx)(x.Z,{className:"w-6 h-6 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Leads"}),(0,r.jsx)("h2",{className:"text-2xl font-bold",children:t.totalLeads})]})]})})}),(0,r.jsx)(i.E.div,{variants:s,children:(0,r.jsx)(o.Zb,{children:(0,r.jsxs)(o.aY,{className:"flex items-center p-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-yellow-100 mr-4",children:(0,r.jsx)(f.Z,{className:"w-6 h-6 text-yellow-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Today's Tasks"}),(0,r.jsx)("h2",{className:"text-2xl font-bold",children:t.todaysTasks})]})]})})}),(0,r.jsx)(i.E.div,{variants:s,children:(0,r.jsx)(o.Zb,{children:(0,r.jsxs)(o.aY,{className:"flex items-center p-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-purple-100 mr-4",children:(0,r.jsx)(h.Z,{className:"w-6 h-6 text-purple-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Upcoming Tasks"}),(0,r.jsx)("h2",{className:"text-2xl font-bold",children:t.upcomingTasks})]})]})})})]})}function w(e){let{allTasks:t,getStatusIcon:s,getPriorityColor:l}=e;return(0,r.jsx)(i.E.div,{className:"mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsx)(o.Ol,{children:(0,r.jsx)(o.ll,{children:"All Tasks"})}),(0,r.jsx)(o.aY,{children:(0,r.jsxs)(g.iA,{children:[(0,r.jsx)(g.xD,{children:(0,r.jsxs)(g.SC,{children:[(0,r.jsx)(g.ss,{children:"Status"}),(0,r.jsx)(g.ss,{children:"Title"}),(0,r.jsx)(g.ss,{children:"Due Date"}),(0,r.jsx)(g.ss,{children:"Priority"}),(0,r.jsx)(g.ss,{children:"Description"})]})}),(0,r.jsx)(g.RM,{children:0===t.length?(0,r.jsx)(N,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:(0,r.jsx)(g.pj,{colSpan:5,className:"text-center text-muted-foreground py-4",children:"No tasks found"})}):t.map((e,t)=>(0,r.jsxs)(N,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2+.1*t},whileHover:{scale:1.01,backgroundColor:"rgba(0,0,0,0.02)"},children:[(0,r.jsx)(g.pj,{children:(0,r.jsx)("div",{className:"flex items-center",children:s(e.status)})}),(0,r.jsx)(g.pj,{className:"font-medium",children:e.title}),(0,r.jsx)(g.pj,{children:(0,p.WU)(new Date(e.date),"MMM dd, yyyy")}),(0,r.jsx)(g.pj,{children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(l(e.priority)),children:e.priority})}),(0,r.jsx)(g.pj,{className:"max-w-xs truncate",children:e.description||"-"})]},e.id))})]})})]})})}function k(){let e=(0,a.useRouter)(),[t,s]=(0,n.useState)(new Date),[l,u]=(0,n.useState)({totalTasks:0,totalLeads:0,todaysTasks:0,upcomingTasks:0}),[x,f]=(0,n.useState)(!0),[h,p]=(0,n.useState)([]);return((0,n.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await fetch("/api/leads"),s=await t.json();if(!e)return;let r=new Date;r.setHours(0,0,0,0);let l=new Date(r);l.setDate(l.getDate()+7);let n=s.reduce((e,t)=>t.tasks?[...e,...t.tasks]:e,[]),a=n.filter(e=>"pending"===e.status),i=a.filter(e=>{let t=new Date(e.date);return t.setHours(0,0,0,0),t.getTime()===r.getTime()});e&&(u({totalTasks:a.length,totalLeads:s.length,todaysTasks:i.length,upcomingTasks:a.filter(e=>{let t=new Date(e.date);return t>=r&&t<=l}).length}),p(n),f(!1))}catch(t){console.error("Error fetching metrics:",t),e&&f(!1)}})(),()=>{e=!1}},[]),x)?(0,r.jsx)(d.c,{children:(0,r.jsxs)("div",{className:"p-6 animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 w-48 bg-gray-200 rounded mb-6"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{className:"h-24 bg-gray-200 rounded"},t))}),(0,r.jsx)("div",{className:"h-96 bg-gray-200 rounded"})]})}):(0,r.jsx)(d.c,{children:(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsxs)(i.E.div,{className:"p-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,r.jsx)(i.E.h1,{className:"text-2xl font-bold mb-6",initial:{x:-20},animate:{x:0},transition:{duration:.5},children:"Dashboard"}),(0,r.jsx)(v,{metrics:l}),(0,r.jsx)(w,{allTasks:h,getStatusIcon:e=>{switch(e){case"completed":return(0,r.jsx)(m.Z,{className:"h-5 w-5 text-green-600"});case"cancelled":return(0,r.jsx)(j.Z,{className:"h-5 w-5 text-red-600"});case"pending":return(0,r.jsx)(y.Z,{className:"h-5 w-5 text-yellow-600"});default:return null}},getPriorityColor:e=>{switch(e){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}}}),(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{className:"h-[400px] flex items-center justify-center",children:"Loading calendar..."}),children:(0,r.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsx)(o.ll,{children:"Calendar"}),(0,r.jsx)(i.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsx)(c.z,{onClick:()=>e.push("/calendar/add"),className:"bg-red-500 hover:bg-red-600 text-white",children:"+ Add New Event"})})]}),(0,r.jsx)(o.aY,{children:(0,r.jsx)(b,{selectedDate:t,onDateChange:s})})]})})})]})})})}},19160:function(e,t,s){"use strict";s.d(t,{RM:function(){return d},SC:function(){return c},iA:function(){return a},pj:function(){return u},ss:function(){return o},xD:function(){return i}});var r=s(3827),l=s(64090),n=s(1657);let a=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",s),...l})})});a.displayName="Table";let i=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",s),...l})});i.displayName="TableHeader";let d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",s),...l})});d.displayName="TableBody",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...l})}).displayName="TableFooter";let c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...l})});c.displayName="TableRow";let o=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...l})});o.displayName="TableHead";let u=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...l})});u.displayName="TableCell",l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",s),...l})}).displayName="TableCaption"},49108:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(57977).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},62985:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(57977).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},19175:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(57977).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},59886:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(57977).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},64178:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(57977).Z)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},26490:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(57977).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},42527:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(57977).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},24232:function(e,t,s){"use strict";s.d(t,{default:function(){return l.a}});var r=s(24930),l=s.n(r)},24930:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let r=s(86921);s(3827),s(64090);let l=r._(s(84795));function n(e,t){let s={loading:e=>{let{error:t,isLoading:s,pastDelay:r}=e;return null}};return"function"==typeof e&&(s.loader=e),(0,l.default)({...s,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},19721:function(e,t,s){"use strict";function r(e){let{reason:t,children:s}=e;return s}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),s(99775)},84795:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let r=s(3827),l=s(64090),n=s(19721);function a(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let i={loader:()=>Promise.resolve(a(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},s=(0,l.lazy)(()=>t.loader().then(a)),d=t.loading;function c(e){let a=d?(0,r.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,r.jsx)(s,{...e}):(0,r.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(s,{...e})});return(0,r.jsx)(l.Suspense,{fallback:a,children:i})}return c.displayName="LoadableComponent",c}}},function(e){e.O(0,[6860,9593,8792,162,703,9096,9949,4011,6863,2971,8069,1744],function(){return e(e.s=51517)}),_N_E=e.O()}]);