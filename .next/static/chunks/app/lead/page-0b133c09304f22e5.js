(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[624],{20067:function(){},72061:function(){},25760:function(e,l,a){Promise.resolve().then(a.bind(a,12611))},12611:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return ea}});var s=a(3827),r=a(26863),n=a(64090),i=a(19160),t=a(45179),d=a(85754),o=a(45509),c=a(31478),u=a(27815),h=a(85904),x=a(42527),p=a(70094),v=a(10632),m=a(28670),g=a(37211),j=a(28814),y=a(58390),f=a(70769),b=a(47788),N=a(42706),w=a(47907),C=a(1657),S=a(14323),k=a(29644);let P=e=>new Promise((l,a)=>{let s=new FileReader;s.onload=e=>{try{var s;let a=null===(s=e.target)||void 0===s?void 0:s.result,r=S.ij(a,{type:"binary"}),n=r.SheetNames[0],i=r.Sheets[n],t=S.P6.sheet_to_json(i).map(e=>({_id:(0,k.Z)(),name:e.name||"",email:e.email||"",phone:e.phone||"",status:e.status||"new",property:e.property||"",date:new Date().toISOString(),notes:e.notes||"",callHistory:[],strategy:{lastUpdated:new Date().toISOString(),tasks:[],notes:""}}));l(t)}catch(e){a(e)}},s.onerror=e=>a(e),s.readAsBinaryString(e)});var _=a(38152);let T=_.zt,R=_.fC,I=_.xz,A=n.forwardRef((e,l)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(_.VY,{ref:l,sideOffset:r,className:(0,C.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})});A.displayName=_.VY.displayName;var L=a(49842),Q=a(40110),V=a(23444);let B=[{value:"cold",label:"Cold"},{value:"warm",label:"Warm"},{value:"hot",label:"Hot"},{value:"mild",label:"Mild"}],E=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"not answering",label:"Not Answering"},{value:"not actively answering",label:"Not Actively Answering"},{value:"always responding",label:"Always Responding"}],D=[{value:"website",label:"Website Enquiry"},{value:"google ads",label:"Google Ads"},{value:"meta",label:"Meta"},{value:"refferal",label:"Referral"},{value:"linkedin",label:"LinkedIn"},{value:"youtube",label:"YouTube"}],O=[{value:"Pre construction",label:"Pre Construction"},{value:"resale",label:"Resale"},{value:"seller",label:"Seller"},{value:"buyer",label:"Buyer"}],H=[{value:"Investor",label:"Investor"},{value:"custom buyer",label:"Custom Buyer"},{value:"first home buyer",label:"First Home Buyer"},{value:"seasonal investor",label:"Seasonal Investor"},{value:"commercial buyer",label:"Commercial Buyer"}],z=[{value:"downtown",label:"Downtown"},{value:"north_york",label:"North York"},{value:"scarborough",label:"Scarborough"},{value:"etobicoke",label:"Etobicoke"},{value:"mississauga",label:"Mississauga"},{value:"brampton",label:"Brampton"},{value:"markham",label:"Markham"},{value:"vaughan",label:"Vaughan"}],F=[{value:"initial_contact",label:"Initial Contact"},{value:"property_viewing",label:"Property Viewing"},{value:"offer_made",label:"Offer Made"},{value:"offer_accepted",label:"Offer Accepted"},{value:"deal_closed",label:"Deal Closed"},{value:"deal_lost",label:"Deal Lost"}],M=[{value:"english",label:"English"},{value:"french",label:"French"},{value:"mandarin",label:"Mandarin"},{value:"hindi",label:"Hindi"},{value:"punjabi",label:"Punjabi"}],U=[{value:"christianity",label:"Christianity"},{value:"islam",label:"Islam"},{value:"hinduism",label:"Hinduism"},{value:"sikhism",label:"Sikhism"},{value:"buddhism",label:"Buddhism"},{value:"jainism",label:"Jainism"},{value:"other",label:"Other"}],Z={cold:"bg-gray-100 text-gray-800",warm:"bg-yellow-100 text-yellow-800",hot:"bg-red-100 text-red-800",mild:"bg-blue-100 text-blue-800"},q={"Pre construction":"bg-purple-100 text-purple-800",resale:"bg-indigo-100 text-indigo-800",seller:"bg-pink-100 text-pink-800",buyer:"bg-orange-100 text-orange-800"},J={website:"bg-green-100 text-green-800","google ads":"bg-blue-100 text-blue-800",meta:"bg-purple-100 text-purple-800",refferal:"bg-yellow-100 text-yellow-800",linkedin:"bg-sky-100 text-sky-800",youtube:"bg-red-100 text-red-800"};function Y(){var e,l,a,r,S,k,_,Y,$,G,W,K,X,ee,el,ea,es;let[er,en]=(0,n.useState)([]),[ei,et]=(0,n.useState)(!1),[ed,eo]=(0,n.useState)("All"),[ec,eu]=(0,n.useState)(""),[eh,ex]=(0,n.useState)(!0),{toast:ep}=(0,b.pm)(),[ev,em]=(0,n.useState)(null),[eg,ej]=(0,n.useState)(!1),ey=(0,w.useRouter)(),[ef,eb]=(0,n.useState)(!1),[eN,ew]=(0,n.useState)([]),[eC,eS]=(0,n.useState)(!1),[ek,eP]=(0,n.useState)(!1),[e_,eT]=(0,n.useState)({status:"",type:"",assignedTo:"",search:"",conversion:"",ageRange:{min:0,max:100},language:"",gender:"",religion:"",realtorAssociation:"",salesRange:{min:0,max:100},lastClosedDateRange:{start:"",end:""}}),[eR,eI]=(0,n.useState)(""),[eA,eL]=(0,n.useState)(!1),[eQ,eV]=(0,n.useState)(!1),[eB,eE]=(0,n.useState)("all"),[eD,eO]=(0,n.useState)("all"),[eH,ez]=(0,n.useState)({name:"",email:"",phone:"",property:"",leadStatus:"",leadType:"",leadSource:"",leadResponse:"",clientType:"",location:"",assignedTo:"",notes:"",propertyPreferences:{budget:{min:0,max:0},propertyType:""}}),[eF,eM]=(0,n.useState)(!1),[eU,eZ]=(0,n.useState)(!1),[eq,eJ]=(0,n.useState)(!1);(0,n.useEffect)(()=>{et(!0),eY(),e$()},[]),(0,n.useEffect)(()=>{if(ei){eY();let e=()=>{en(JSON.parse(localStorage.getItem("leads")||"[]"))};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}},[ei]);let eY=async()=>{try{ex(!0);let e=await fetch("/api/leads");if(!e.ok)throw Error("Failed to fetch leads");let l=await e.json();en(l),localStorage.setItem("leads",JSON.stringify(l))}catch(e){console.error("Fetch leads error:",e),ep({variant:"destructive",title:"Error",description:"Failed to fetch leads. Please try again."}),en(JSON.parse(localStorage.getItem("leads")||"[]"))}finally{ex(!1)}},e$=async()=>{try{let e=await fetch("/api/users"),l=await e.json();ew(l)}catch(e){console.error("Error fetching users:",e),ep({variant:"destructive",title:"Error",description:"Failed to fetch users"})}},eG=e=>{let l=eN.find(l=>l._id===e);return l?l.name:"Unassigned"},eW=async(e,l)=>{try{let a=await fetch("/api/call",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e,phoneNumber:l})}),s=await a.json();if(!a.ok)throw Error(s.error||"Failed to initiate call");ep({title:"Call Initiated",description:"Connecting your call..."}),eY()}catch(e){console.error("Call error:",e),ep({variant:"destructive",title:"Error",description:e instanceof Error?e.message:"Failed to initiate call. Please try again."})}},eK=async e=>{var l;let a=null===(l=e.target.files)||void 0===l?void 0:l[0];if(a)try{let e=await P(a);if(!(await fetch("/api/leads/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leads:e})})).ok)throw Error("Failed to save leads to database");let l=[...JSON.parse(localStorage.getItem("leads")||"[]"),...e];localStorage.setItem("leads",JSON.stringify(l)),eY(),ep({title:"Success",description:"".concat(e.length," leads imported successfully")})}catch(e){console.error("Import error:",e),ep({variant:"destructive",title:"Import Failed",description:"Failed to import leads. Please check the file format and try again."})}finally{e.target.value=""}},eX=e=>e?Z[e]:Z.cold,e0=e=>e?q[e]:"bg-gray-100 text-gray-800",e2=e=>e?J[e]:"bg-gray-100 text-gray-800",e4=()=>{let e=[...er];if(eR){let l=eR.toLowerCase();e=e.filter(e=>{var a,s,r,n,i,t,d,o,c,u,h,x,p,v,m,g,j,y,f,b,N,w,C,S,k,P;let _=(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(l))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(l))||(null===(r=e.phone)||void 0===r?void 0:r.includes(l))||(null===(n=e.property)||void 0===n?void 0:n.toLowerCase().includes(l)),T=null===(i=B.find(l=>l.value===e.leadStatus))||void 0===i?void 0:i.label.toLowerCase().includes(l),R=null===(t=O.find(l=>l.value===e.leadType))||void 0===t?void 0:t.label.toLowerCase().includes(l),I=null===(d=D.find(l=>l.value===e.leadSource))||void 0===d?void 0:d.label.toLowerCase().includes(l),A=null===(o=E.find(l=>l.value===e.leadResponse))||void 0===o?void 0:o.label.toLowerCase().includes(l),L=null===(c=H.find(l=>l.value===e.clientType))||void 0===c?void 0:c.label.toLowerCase().includes(l),Q=null===(u=z.find(l=>l.value===e.location))||void 0===u?void 0:u.label.toLowerCase().includes(l),V=null===(h=eN.find(l=>l._id===e.assignedTo))||void 0===h?void 0:h.name.toLowerCase().includes(l),F=null===(x=e.notes)||void 0===x?void 0:x.toLowerCase().includes(l),M=(null===(v=e.propertyPreferences)||void 0===v?void 0:null===(p=v.propertyType)||void 0===p?void 0:p.some(e=>e.toLowerCase().includes(l)))||(null===(g=e.propertyPreferences)||void 0===g?void 0:null===(m=g.locations)||void 0===m?void 0:m.some(e=>e.toLowerCase().includes(l)))||(null===(y=e.propertyPreferences)||void 0===y?void 0:null===(j=y.features)||void 0===j?void 0:j.some(e=>e.toLowerCase().includes(l))),U=null===(f=e.callHistory)||void 0===f?void 0:f.some(e=>{var a;return null===(a=e.points)||void 0===a?void 0:a.some(e=>e.text.toLowerCase().includes(l))});return[e.name,e.email,e.phone,e.property,null===(b=B.find(l=>l.value===e.leadStatus))||void 0===b?void 0:b.label,null===(N=O.find(l=>l.value===e.leadType))||void 0===N?void 0:N.label,null===(w=D.find(l=>l.value===e.leadSource))||void 0===w?void 0:w.label,null===(C=E.find(l=>l.value===e.leadResponse))||void 0===C?void 0:C.label,null===(S=H.find(l=>l.value===e.clientType))||void 0===S?void 0:S.label,null===(k=z.find(l=>l.value===e.location))||void 0===k?void 0:k.label,null===(P=eN.find(l=>l._id===e.assignedTo))||void 0===P?void 0:P.name,e.notes].filter(Boolean).join(" ").toLowerCase().includes(l)||_||T||R||I||A||L||Q||V||F||M||U})}return"All"!==ed&&(e=e.filter(e=>e.leadStatus===ed)),eA&&(e=e.filter(e=>!e.callHistory||0===e.callHistory.length)),eQ&&(e=e.filter(e=>"website"===e.leadSource)),e_.status&&(e=e.filter(e=>e.leadStatus===e_.status)),e_.type&&(e=e.filter(e=>e.leadType===e_.type)),e_.assignedTo&&(e=e.filter(e=>e.assignedTo===e_.assignedTo)),e},e1=e=>{let l=e4();return e&&"all"!==e?l.filter(l=>l.leadStatus===e):l},e5=e=>{let l=e4();return e&&"all"!==e?l.filter(l=>{var a,s,r;return(null===(a=l.location)||void 0===a?void 0:a.toLowerCase())===e.toLowerCase()||(null===(r=l.propertyPreferences)||void 0===r?void 0:null===(s=r.locations)||void 0===s?void 0:s.some(l=>l.toLowerCase()===e.toLowerCase()))}):l},e8=()=>{ez({name:"",email:"",phone:"",property:"",leadStatus:"",leadType:"",leadSource:"",leadResponse:"",clientType:"",location:"",assignedTo:"",notes:"",propertyPreferences:{budget:{min:0,max:0},propertyType:""}})},e6=async()=>{try{if(!eH.name||!eH.email||!eH.phone){ep({variant:"destructive",title:"Error",description:"Please fill in all required fields (Name, Email, Phone)"});return}if(!(await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...eH,date:new Date().toISOString()})})).ok)throw Error("Failed to add lead");eY(),e8(),eS(!1),ep({title:"Success",description:"Lead added successfully"})}catch(e){console.error("Add lead error:",e),ep({variant:"destructive",title:"Error",description:"Failed to add lead. Please try again."})}};return ei?(0,s.jsxs)(u.Zb,{children:[(0,s.jsxs)(u.Ol,{children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,s.jsx)(u.ll,{children:"Lead Management"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 w-full md:w-auto",children:[(0,s.jsxs)(d.z,{variant:eA?"default":"outline",onClick:()=>eL(!eA),className:"bg-red-50 hover:bg-red-100 text-red-600 hover:text-red-700 border-red-200 flex-1 md:flex-none",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"No Calls"}),"(",er.filter(e=>!e.callHistory||0===e.callHistory.length).length,")"]}),(0,s.jsxs)(d.z,{variant:eQ?"default":"outline",className:"bg-blue-50 hover:bg-blue-100 text-blue-600 hover:text-blue-700 border-blue-200 flex-1 md:flex-none",onClick:()=>eV(!eQ),children:[(0,s.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Website Enquiries"}),"(",er.filter(e=>"website"===e.leadSource).length,")"]}),(0,s.jsxs)(d.z,{onClick:()=>eS(!0),className:"bg-green-600 hover:bg-green-700 text-white flex-1 md:flex-none",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Add Lead"})]}),(0,s.jsxs)("div",{className:"relative flex-1 md:flex-none",children:[(0,s.jsx)(t.I,{type:"file",id:"excel-upload",className:"hidden",accept:".xlsx,.xls",onChange:eK}),(0,s.jsxs)(d.z,{variant:"outline",onClick:()=>{var e;return null===(e=document.getElementById("excel-upload"))||void 0===e?void 0:e.click()},className:"border-green-600 text-green-600 hover:bg-green-50 w-full",children:[(0,s.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Import Leads"})]})]})]})]}),(0,s.jsx)("div",{className:"mt-4 border-b overflow-x-auto",children:(0,s.jsxs)("div",{className:"flex space-x-2 min-w-max",children:[(0,s.jsxs)(d.z,{variant:"all"===eB?"default":"ghost",onClick:()=>eE("all"),className:"relative rounded-none border-b-2 border-transparent px-4 whitespace-nowrap",children:["All Leads (",e4().length,")"]}),(0,s.jsxs)(d.z,{variant:"hot"===eB?"default":"ghost",onClick:()=>eE("hot"),className:"relative rounded-none border-b-2 border-transparent px-4 text-red-600 hover:text-red-700 whitespace-nowrap",children:["Hot Leads (",e1("hot").length,")"]}),(0,s.jsxs)(d.z,{variant:"warm"===eB?"default":"ghost",onClick:()=>eE("warm"),className:"relative rounded-none border-b-2 border-transparent px-4 text-yellow-600 hover:text-yellow-700 whitespace-nowrap",children:["Warm Leads (",e1("warm").length,")"]}),(0,s.jsxs)(d.z,{variant:"cold"===eB?"default":"ghost",onClick:()=>eE("cold"),className:"relative rounded-none border-b-2 border-transparent px-4 text-blue-600 hover:text-blue-700 whitespace-nowrap",children:["Cold Leads (",e1("cold").length,")"]}),(0,s.jsxs)(d.z,{variant:"mild"===eB?"default":"ghost",onClick:()=>eE("mild"),className:"relative rounded-none border-b-2 border-transparent px-4 text-green-600 hover:text-green-700 whitespace-nowrap",children:["Mild Leads (",e1("mild").length,")"]})]})}),(0,s.jsx)("div",{className:"mt-4 border-b overflow-x-auto",children:(0,s.jsxs)("div",{className:"flex space-x-2 min-w-max",children:[(0,s.jsxs)(d.z,{variant:"all"===eD?"default":"ghost",onClick:()=>eO("all"),className:"relative rounded-none border-b-2 border-transparent px-4 whitespace-nowrap",children:["All Locations (",e4().length,")"]}),z.map(e=>(0,s.jsxs)(d.z,{variant:eD===e.value?"default":"ghost",onClick:()=>eO(e.value),className:"relative rounded-none border-b-2 border-transparent px-4 whitespace-nowrap",children:[e.label," (",e5(e.value).length,")"]},e.value))]})}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 mt-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(m.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(t.I,{placeholder:"Search leads...",value:eR,onChange:e=>eI(e.target.value),className:"pl-8"})]}),(0,s.jsxs)(N.Vq,{open:ek,onOpenChange:eP,children:[(0,s.jsx)(N.hg,{asChild:!0,children:(0,s.jsxs)(d.z,{variant:"outline",className:Object.values(e_).some(e=>""!==e)?"bg-blue-50 text-blue-600 border-blue-200":"",children:[(0,s.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Filters ",Object.values(e_).filter(e=>""!==e).length>0&&"(".concat(Object.values(e_).filter(e=>""!==e).length,")")]})}),(0,s.jsxs)(N.cZ,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(N.fK,{children:(0,s.jsx)(N.$N,{children:"Filter Leads"})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Lead Status"}),(0,s.jsxs)(o.Ph,{value:e_.status,onValueChange:e=>eT({...e_,status:"all"===e?"":e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select status"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"All"}),B.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Lead Type"}),(0,s.jsxs)(o.Ph,{value:e_.type,onValueChange:e=>eT({...e_,type:"all"===e?"":e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select type"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"All"}),O.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Assigned To"}),(0,s.jsxs)(o.Ph,{value:e_.assignedTo,onValueChange:e=>eT({...e_,assignedTo:"all"===e?"":e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select user"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"All"}),(0,s.jsx)(o.Ql,{value:"unassigned",children:"Unassigned"}),eN.map(e=>(0,s.jsx)(o.Ql,{value:e._id,children:e.name},e._id))]})]})]}),(0,s.jsxs)("div",{className:"col-span-2 flex justify-end gap-2 mt-4",children:[(0,s.jsx)(d.z,{variant:"outline",onClick:()=>{eT({status:"",type:"",assignedTo:"",search:"",conversion:"",ageRange:{min:0,max:100},language:"",gender:"",religion:"",realtorAssociation:"",salesRange:{min:0,max:100},lastClosedDateRange:{start:"",end:""}})},className:"border-red-200 text-red-600 hover:bg-red-50",children:"Reset Filters"}),(0,s.jsx)(d.z,{onClick:()=>eP(!1),className:"bg-blue-600 text-white hover:bg-blue-700",children:"Apply Filters"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Lead Conversion"}),(0,s.jsxs)(o.Ph,{value:e_.conversion,onValueChange:e=>eT({...e_,conversion:"all"===e?"":e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"All conversions"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"All"}),F.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Language"}),(0,s.jsxs)(o.Ph,{value:e_.language,onValueChange:e=>eT({...e_,language:"all"===e?"":e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"All languages"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"All"}),M.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Gender"}),(0,s.jsxs)(o.Ph,{value:e_.gender,onValueChange:e=>eT({...e_,gender:"all"===e?"":e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"All genders"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"All"}),(0,s.jsx)(o.Ql,{value:"male",children:"Male"}),(0,s.jsx)(o.Ql,{value:"female",children:"Female"}),(0,s.jsx)(o.Ql,{value:"other",children:"Other"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Religion"}),(0,s.jsxs)(o.Ph,{value:e_.religion,onValueChange:e=>eT({...e_,religion:"all"===e?"":e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"All religions"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"All"}),U.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Age Range"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(t.I,{type:"number",placeholder:"Min",value:e_.ageRange.min,onChange:e=>eT({...e_,ageRange:{...e_.ageRange,min:parseInt(e.target.value)}})}),(0,s.jsx)(t.I,{type:"number",placeholder:"Max",value:e_.ageRange.max,onChange:e=>eT({...e_,ageRange:{...e_.ageRange,max:parseInt(e.target.value)}})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Realtor Association"}),(0,s.jsx)(t.I,{placeholder:"Search by realtor association",value:e_.realtorAssociation,onChange:e=>eT({...e_,realtorAssociation:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Sales Range"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(t.I,{type:"number",placeholder:"Min sales",value:e_.salesRange.min,onChange:e=>eT({...e_,salesRange:{...e_.salesRange,min:parseInt(e.target.value)}})}),(0,s.jsx)(t.I,{type:"number",placeholder:"Max sales",value:e_.salesRange.max,onChange:e=>eT({...e_,salesRange:{...e_.salesRange,max:parseInt(e.target.value)}})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Last Closed Date Range"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(t.I,{type:"date",value:e_.lastClosedDateRange.start,onChange:e=>eT({...e_,lastClosedDateRange:{...e_.lastClosedDateRange,start:e.target.value}})}),(0,s.jsx)(t.I,{type:"date",value:e_.lastClosedDateRange.end,onChange:e=>eT({...e_,lastClosedDateRange:{...e_.lastClosedDateRange,end:e.target.value}})})]})]})]})]}),(0,s.jsx)(u.aY,{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(i.iA,{children:[(0,s.jsx)(i.xD,{children:(0,s.jsxs)(i.SC,{children:[(0,s.jsx)(i.ss,{className:"min-w-[150px]",children:"Name"}),(0,s.jsx)(i.ss,{className:"min-w-[150px]",children:"Contact"}),(0,s.jsx)(i.ss,{className:"min-w-[100px]",children:"Status"}),(0,s.jsx)(i.ss,{className:"min-w-[100px]",children:"Type"}),(0,s.jsx)(i.ss,{className:"min-w-[100px]",children:"Source"}),(0,s.jsx)(i.ss,{className:"min-w-[100px]",children:"Location"}),(0,s.jsx)(i.ss,{className:"min-w-[150px]",children:"Property"}),(0,s.jsx)(i.ss,{className:"min-w-[100px]",children:"Created"}),(0,s.jsx)(i.ss,{className:"min-w-[120px]",children:"Assigned To"}),(0,s.jsx)(i.ss,{className:"min-w-[150px]",children:"Actions"})]})}),(0,s.jsx)(i.RM,{children:e5(eD).filter(e=>"all"===eB||e.leadStatus===eB).map(e=>{var l,a,r;return(0,s.jsxs)(i.SC,{children:[(0,s.jsx)(i.pj,{children:(0,s.jsx)(d.z,{variant:"link",className:"p-0 h-auto font-normal text-black hover:text-gray-700",onClick:()=>ey.push("/lead/".concat(e._id)),children:e.name})}),(0,s.jsx)(i.pj,{children:(0,s.jsxs)("div",{className:"text-sm text-black",children:[(0,s.jsx)("div",{children:e.email}),(0,s.jsx)("div",{className:"text-gray-600",children:e.phone})]})}),(0,s.jsx)(i.pj,{children:(0,s.jsx)(c.C,{className:eX(e.leadStatus||"cold"),children:(e.leadStatus||"cold").charAt(0).toUpperCase()+(e.leadStatus||"cold").slice(1)})}),(0,s.jsx)(i.pj,{children:(0,s.jsx)(c.C,{className:e0(e.leadType),children:(e.leadType||"buyer").charAt(0).toUpperCase()+(e.leadType||"buyer").slice(1)})}),(0,s.jsx)(i.pj,{children:(0,s.jsx)(c.C,{className:e2(e.leadSource),children:(null===(l=e.leadSource)||void 0===l?void 0:l.charAt(0).toUpperCase())+(null===(a=e.leadSource)||void 0===a?void 0:a.slice(1))||"Unknown"})}),(0,s.jsx)(i.pj,{children:(0,s.jsx)(c.C,{variant:"outline",children:e.location||"Not specified"})}),(0,s.jsx)(i.pj,{children:e.property}),(0,s.jsx)(i.pj,{children:(0,C.p)(e.date)}),(0,s.jsx)(i.pj,{children:e.assignedTo?eG(e.assignedTo):"Unassigned"}),(0,s.jsx)(i.pj,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(d.z,{variant:"outline",size:"sm",className:"flex-1 border-black text-black hover:bg-black hover:text-white",onClick:()=>{e._id&&e.phone&&eW(e._id,e.phone)},children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Call"]}),(0,s.jsx)(T,{children:(0,s.jsxs)(R,{children:[(0,s.jsx)(I,{asChild:!0,children:(0,s.jsx)(d.z,{variant:"outline",size:"sm",className:"border-black text-black hover:bg-black hover:text-white",onClick:l=>{l.preventDefault(),l.stopPropagation(),em(e),eM(!0)},children:(0,s.jsx)(j.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(A,{children:(0,s.jsx)("p",{children:"View full details"})})]})})]}),(0,s.jsxs)(d.z,{variant:"outline",size:"sm",className:"border-black text-black hover:bg-black hover:text-white w-full",onClick:()=>eb(!0),children:[(0,s.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"View Call History"]}),(0,s.jsx)("div",{className:"mt-2 space-y-1",children:(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Tasks: ",(null===(r=e.tasks)||void 0===r?void 0:r.length)||0,e.tasks&&e.tasks.length>0&&(0,s.jsxs)("span",{className:"ml-2 text-gray-500",children:["(",e.tasks.filter(e=>"pending"===e.status).length," pending)"]})]})})]})})]},e._id)})})]})})}),(0,s.jsx)(N.Vq,{open:eC,onOpenChange:e=>{eS(e),e||e8()},children:(0,s.jsxs)(N.cZ,{className:"max-w-3xl",children:[(0,s.jsx)(N.fK,{children:(0,s.jsx)(N.$N,{children:"Add New Lead"})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Name *"}),(0,s.jsx)(t.I,{placeholder:"Enter lead name",value:eH.name,onChange:e=>ez({...eH,name:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Email *"}),(0,s.jsx)(t.I,{type:"email",placeholder:"Enter email address",value:eH.email,onChange:e=>ez({...eH,email:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Phone *"}),(0,s.jsx)(t.I,{placeholder:"Enter phone number",value:eH.phone,onChange:e=>ez({...eH,phone:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Property"}),(0,s.jsx)(t.I,{placeholder:"Enter property details",value:eH.property,onChange:e=>ez({...eH,property:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Lead Status"}),(0,s.jsxs)(o.Ph,{value:eH.leadStatus,onValueChange:e=>ez({...eH,leadStatus:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select status"})}),(0,s.jsx)(o.Bw,{children:B.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Lead Type"}),(0,s.jsxs)(o.Ph,{value:eH.leadType,onValueChange:e=>ez({...eH,leadType:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select type"})}),(0,s.jsx)(o.Bw,{children:O.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Lead Source"}),(0,s.jsxs)(o.Ph,{value:eH.leadSource,onValueChange:e=>ez({...eH,leadSource:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select source"})}),(0,s.jsx)(o.Bw,{children:D.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Lead Response"}),(0,s.jsxs)(o.Ph,{value:eH.leadResponse,onValueChange:e=>ez({...eH,leadResponse:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select response"})}),(0,s.jsx)(o.Bw,{children:E.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Client Type"}),(0,s.jsxs)(o.Ph,{value:eH.clientType,onValueChange:e=>ez({...eH,clientType:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select client type"})}),(0,s.jsx)(o.Bw,{children:H.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Location"}),(0,s.jsxs)(o.Ph,{value:eH.location,onValueChange:e=>ez({...eH,location:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select location"})}),(0,s.jsx)(o.Bw,{children:z.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Assigned To"}),(0,s.jsxs)(o.Ph,{value:eH.assignedTo,onValueChange:e=>ez({...eH,assignedTo:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select user"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"unassigned",children:"Unassigned"}),eN.map(e=>(0,s.jsx)(o.Ql,{value:e._id,children:e.name},e._id))]})]})]}),(0,s.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,s.jsx)(L._,{children:"Property Preferences"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Budget Range"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(t.I,{type:"number",placeholder:"Min",value:eH.propertyPreferences.budget.min,onChange:e=>ez({...eH,propertyPreferences:{...eH.propertyPreferences,budget:{...eH.propertyPreferences.budget,min:parseInt(e.target.value)||0}}})}),(0,s.jsx)(t.I,{type:"number",placeholder:"Max",value:eH.propertyPreferences.budget.max,onChange:e=>ez({...eH,propertyPreferences:{...eH.propertyPreferences,budget:{...eH.propertyPreferences.budget,max:parseInt(e.target.value)||0}}})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Property Type"}),(0,s.jsxs)(o.Ph,{value:eH.propertyPreferences.propertyType,onValueChange:e=>ez({...eH,propertyPreferences:{...eH.propertyPreferences,propertyType:e}}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select property type"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"detached",children:"Detached"}),(0,s.jsx)(o.Ql,{value:"semi-detached",children:"Semi-Detached"}),(0,s.jsx)(o.Ql,{value:"townhouse",children:"Townhouse"}),(0,s.jsx)(o.Ql,{value:"condo",children:"Condo"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,s.jsx)(L._,{children:"Notes"}),(0,s.jsx)(V.g,{placeholder:"Enter any additional notes about the lead",className:"min-h-[100px]",value:eH.notes,onChange:e=>ez({...eH,notes:e.target.value})})]}),(0,s.jsxs)("div",{className:"col-span-2 flex justify-end gap-2 mt-4",children:[(0,s.jsx)(d.z,{variant:"outline",onClick:()=>{eS(!1),e8()},className:"border-red-200 text-red-600 hover:bg-red-50",children:"Cancel"}),(0,s.jsx)(d.z,{onClick:e6,className:"bg-green-600 text-white hover:bg-green-700",children:"Add Lead"})]})]})]})}),(0,s.jsx)(N.Vq,{open:eF,onOpenChange:e=>{eM(e),e||(em(null),eZ(!1))},children:(0,s.jsxs)(N.cZ,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(N.fK,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(N.$N,{className:"text-xl font-semibold",children:null==ev?void 0:ev.name}),eU?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d.z,{variant:"outline",onClick:()=>eZ(!1),className:"border-red-200 text-red-600 hover:bg-red-50",children:"Cancel"}),(0,s.jsx)(d.z,{onClick:async()=>{if(ev)try{if(!(await fetch("/api/leads/".concat(ev._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ev)})).ok)throw Error("Failed to update lead");ep({title:"Success",description:"Lead updated successfully"}),eZ(!1),eY()}catch(e){console.error("Update lead error:",e),ep({variant:"destructive",title:"Error",description:"Failed to update lead. Please try again."})}},className:"bg-green-600 text-white hover:bg-green-700",children:"Save"})]}):(0,s.jsxs)(d.z,{variant:"outline",onClick:()=>eZ(!0),className:"border-blue-600 text-blue-600 hover:bg-blue-50",children:[(0,s.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)(c.C,{className:eX((null==ev?void 0:ev.leadStatus)||"cold"),children:((null==ev?void 0:ev.leadStatus)||"cold").charAt(0).toUpperCase()+((null==ev?void 0:ev.leadStatus)||"cold").slice(1)}),(0,s.jsx)(c.C,{className:e0((null==ev?void 0:ev.leadType)||"buyer"),children:((null==ev?void 0:ev.leadType)||"buyer").charAt(0).toUpperCase()+((null==ev?void 0:ev.leadType)||"buyer").slice(1)}),(0,s.jsx)(c.C,{className:e2(null==ev?void 0:ev.leadSource),children:((null==ev?void 0:ev.leadSource)||"Unknown").charAt(0).toUpperCase()+((null==ev?void 0:ev.leadSource)||"Unknown").slice(1)})]})]}),ev&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)(Q.mQ,{defaultValue:"details",className:"w-full",children:[(0,s.jsxs)(Q.dr,{className:"w-full justify-start border-b",children:[(0,s.jsx)(Q.SP,{value:"details",className:"px-4",children:"Details"}),(0,s.jsx)(Q.SP,{value:"preferences",className:"px-4",children:"Preferences"}),(0,s.jsx)(Q.SP,{value:"history",className:"px-4",children:"History"}),(0,s.jsx)(Q.SP,{value:"tasks",className:"px-4",children:"Tasks"}),(0,s.jsx)(Q.SP,{value:"notes",className:"px-4",children:"Notes"})]}),(0,s.jsx)(Q.nU,{value:"details",className:"mt-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Contact Information"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(L._,{className:"text-sm text-gray-500",children:"Email"}),eU?(0,s.jsx)(t.I,{value:ev.email,onChange:e=>em({...ev,email:e.target.value}),className:"h-8"}):(0,s.jsx)("div",{className:"text-sm",children:ev.email})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(L._,{className:"text-sm text-gray-500",children:"Phone"}),eU?(0,s.jsx)(t.I,{value:ev.phone,onChange:e=>em({...ev,phone:e.target.value}),className:"h-8"}):(0,s.jsx)("div",{className:"text-sm",children:ev.phone})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Lead Status"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(L._,{className:"text-sm text-gray-500",children:"Lead Response"}),eU?(0,s.jsxs)(o.Ph,{value:ev.leadResponse,onValueChange:e=>em({...ev,leadResponse:e}),children:[(0,s.jsx)(o.i4,{className:"h-8",children:(0,s.jsx)(o.ki,{})}),(0,s.jsx)(o.Bw,{children:E.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]}):(0,s.jsx)("div",{className:"text-sm",children:ev.leadResponse||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(L._,{className:"text-sm text-gray-500",children:"Lead Conversion"}),eU?(0,s.jsxs)(o.Ph,{value:ev.conversion,onValueChange:e=>em({...ev,conversion:e}),children:[(0,s.jsx)(o.i4,{className:"h-8",children:(0,s.jsx)(o.ki,{})}),(0,s.jsx)(o.Bw,{children:F.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]}):(0,s.jsx)("div",{className:"text-sm",children:ev.conversion||"Not specified"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Demographics"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(L._,{className:"text-sm text-gray-500",children:"Age"}),eU?(0,s.jsx)(t.I,{type:"number",value:ev.age,onChange:e=>em({...ev,age:parseInt(e.target.value)}),className:"h-8"}):(0,s.jsx)("div",{className:"text-sm",children:ev.age||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(L._,{className:"text-sm text-gray-500",children:"Gender"}),eU?(0,s.jsxs)(o.Ph,{value:ev.gender,onValueChange:e=>em({...ev,gender:e}),children:[(0,s.jsx)(o.i4,{className:"h-8",children:(0,s.jsx)(o.ki,{})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"male",children:"Male"}),(0,s.jsx)(o.Ql,{value:"female",children:"Female"}),(0,s.jsx)(o.Ql,{value:"other",children:"Other"})]})]}):(0,s.jsx)("div",{className:"text-sm",children:ev.gender||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(L._,{className:"text-sm text-gray-500",children:"Language"}),eU?(0,s.jsxs)(o.Ph,{value:ev.language,onValueChange:e=>em({...ev,language:e}),children:[(0,s.jsx)(o.i4,{className:"h-8",children:(0,s.jsx)(o.ki,{})}),(0,s.jsx)(o.Bw,{children:M.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]}):(0,s.jsx)("div",{className:"text-sm",children:ev.language||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(L._,{className:"text-sm text-gray-500",children:"Religion"}),eU?(0,s.jsxs)(o.Ph,{value:ev.religion,onValueChange:e=>em({...ev,religion:e}),children:[(0,s.jsx)(o.i4,{className:"h-8",children:(0,s.jsx)(o.ki,{})}),(0,s.jsx)(o.Bw,{children:U.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]}):(0,s.jsx)("div",{className:"text-sm",children:ev.religion||"Not specified"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Sales Information"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(L._,{className:"text-sm text-gray-500",children:"Realtor Association"}),eU?(0,s.jsx)(t.I,{value:ev.realtorAssociation,onChange:e=>em({...ev,realtorAssociation:e.target.value}),className:"h-8"}):(0,s.jsx)("div",{className:"text-sm",children:ev.realtorAssociation||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(L._,{className:"text-sm text-gray-500",children:"Closed Sales"}),eU?(0,s.jsx)(t.I,{type:"number",value:null===(e=ev.salesHistory)||void 0===e?void 0:e.closedSales,onChange:e=>em({...ev,salesHistory:{...ev.salesHistory,closedSales:parseInt(e.target.value)}}),className:"h-8"}):(0,s.jsx)("div",{className:"text-sm",children:(null===(l=ev.salesHistory)||void 0===l?void 0:l.closedSales)||"0"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(L._,{className:"text-sm text-gray-500",children:"Last Closed Date"}),eU?(0,s.jsx)(t.I,{type:"date",value:null===(r=ev.salesHistory)||void 0===r?void 0:null===(a=r.lastClosedDate)||void 0===a?void 0:a.split("T")[0],onChange:e=>em({...ev,salesHistory:{...ev.salesHistory,lastClosedDate:new Date(e.target.value).toISOString()}}),className:"h-8"}):(0,s.jsx)("div",{className:"text-sm",children:(null===(S=ev.salesHistory)||void 0===S?void 0:S.lastClosedDate)?(0,C.p)(ev.salesHistory.lastClosedDate):"Not specified"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg md:col-span-2",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Assignment & Property"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(L._,{className:"text-sm text-gray-500",children:"Assigned To"}),eU?(0,s.jsxs)(o.Ph,{value:ev.assignedTo,onValueChange:e=>em({...ev,assignedTo:e}),children:[(0,s.jsx)(o.i4,{className:"h-8",children:(0,s.jsx)(o.ki,{})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"unassigned",children:"Unassigned"}),eN.map(e=>(0,s.jsx)(o.Ql,{value:e._id,children:e.name},e._id))]})]}):(0,s.jsx)("div",{className:"text-sm",children:ev.assignedTo?eG(ev.assignedTo):"Unassigned"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(L._,{className:"text-sm text-gray-500",children:"Location"}),eU?(0,s.jsxs)(o.Ph,{value:ev.location,onValueChange:e=>em({...ev,location:e}),children:[(0,s.jsx)(o.i4,{className:"h-8",children:(0,s.jsx)(o.ki,{})}),(0,s.jsx)(o.Bw,{children:z.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]}):(0,s.jsx)("div",{className:"text-sm",children:ev.location||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-1 md:col-span-2",children:[(0,s.jsx)(L._,{className:"text-sm text-gray-500",children:"Property"}),eU?(0,s.jsx)(t.I,{value:ev.property,onChange:e=>em({...ev,property:e.target.value}),className:"h-8"}):(0,s.jsx)("div",{className:"text-sm",children:ev.property||"Not specified"})]})]})]})]})}),(0,s.jsx)(Q.nU,{value:"preferences",className:"mt-4",children:(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Budget Range"}),eU?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(t.I,{type:"number",placeholder:"Min",value:null===(_=ev.propertyPreferences)||void 0===_?void 0:null===(k=_.budget)||void 0===k?void 0:k.min,onChange:e=>{var l,a,s,r,n,i,t,d,o;return em({...ev,propertyPreferences:{...ev.propertyPreferences,budget:{min:Number(null===(a=ev.propertyPreferences)||void 0===a?void 0:null===(l=a.budget)||void 0===l?void 0:l.min)||0,max:Number(null===(r=ev.propertyPreferences)||void 0===r?void 0:null===(s=r.budget)||void 0===s?void 0:s.max)||0},propertyType:(null===(n=ev.propertyPreferences)||void 0===n?void 0:n.propertyType)||[],bedrooms:(null===(i=ev.propertyPreferences)||void 0===i?void 0:i.bedrooms)||0,bathrooms:(null===(t=ev.propertyPreferences)||void 0===t?void 0:t.bathrooms)||0,locations:(null===(d=ev.propertyPreferences)||void 0===d?void 0:d.locations)||[],features:(null===(o=ev.propertyPreferences)||void 0===o?void 0:o.features)||[]}})}}),(0,s.jsx)(t.I,{type:"number",placeholder:"Max",value:null===($=ev.propertyPreferences)||void 0===$?void 0:null===(Y=$.budget)||void 0===Y?void 0:Y.max,onChange:e=>{var l,a,s,r,n,i,t;return em({...ev,propertyPreferences:{...ev.propertyPreferences,budget:{min:(null===(a=ev.propertyPreferences)||void 0===a?void 0:null===(l=a.budget)||void 0===l?void 0:l.min)||0,max:parseInt(e.target.value)||0},propertyType:(null===(s=ev.propertyPreferences)||void 0===s?void 0:s.propertyType)||[],bedrooms:(null===(r=ev.propertyPreferences)||void 0===r?void 0:r.bedrooms)||0,bathrooms:(null===(n=ev.propertyPreferences)||void 0===n?void 0:n.bathrooms)||0,locations:(null===(i=ev.propertyPreferences)||void 0===i?void 0:i.locations)||[],features:(null===(t=ev.propertyPreferences)||void 0===t?void 0:t.features)||[]}})}})]}):(0,s.jsx)("div",{className:"p-2 border rounded-md",children:(null===(W=ev.propertyPreferences)||void 0===W?void 0:null===(G=W.budget)||void 0===G?void 0:G.min)&&(null===(X=ev.propertyPreferences)||void 0===X?void 0:null===(K=X.budget)||void 0===K?void 0:K.max)?"$".concat(ev.propertyPreferences.budget.min," - $").concat(ev.propertyPreferences.budget.max):"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Property Type"}),eU?(0,s.jsxs)(o.Ph,{value:null!==(es=null===(el=ev.propertyPreferences)||void 0===el?void 0:null===(ee=el.propertyType)||void 0===ee?void 0:ee[0])&&void 0!==es?es:"",onValueChange:e=>{var l,a,s,r,n;return em({...ev,propertyPreferences:{budget:(null===(l=ev.propertyPreferences)||void 0===l?void 0:l.budget)||{min:0,max:0},propertyType:[e],bedrooms:(null===(a=ev.propertyPreferences)||void 0===a?void 0:a.bedrooms)||0,bathrooms:(null===(s=ev.propertyPreferences)||void 0===s?void 0:s.bathrooms)||0,locations:(null===(r=ev.propertyPreferences)||void 0===r?void 0:r.locations)||[],features:(null===(n=ev.propertyPreferences)||void 0===n?void 0:n.features)||[]}})},children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"detached",children:"Detached"}),(0,s.jsx)(o.Ql,{value:"semi-detached",children:"Semi-Detached"}),(0,s.jsx)(o.Ql,{value:"townhouse",children:"Townhouse"}),(0,s.jsx)(o.Ql,{value:"condo",children:"Condo"})]})]}):(0,s.jsx)("div",{className:"p-2 border rounded-md",children:(null===(ea=ev.propertyPreferences)||void 0===ea?void 0:ea.propertyType)||"Not specified"})]})]})})}),(0,s.jsx)(Q.nU,{value:"history",className:"mt-4",children:(0,s.jsx)("div",{className:"space-y-4",children:ev.callHistory&&ev.callHistory.length>0?ev.callHistory.map((e,l)=>{var a;return(0,s.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-500 mb-2",children:[(0,s.jsx)("span",{children:new Date(e.date).toLocaleString()}),(0,s.jsxs)("span",{children:[e.duration," minutes"]})]}),null===(a=e.points)||void 0===a?void 0:a.map((e,l)=>(0,s.jsx)("div",{className:"text-sm",children:e.text},l))]},l)}):(0,s.jsx)("div",{className:"text-center text-gray-500 py-4",children:"No call history available"})})}),(0,s.jsx)(Q.nU,{value:"tasks",className:"mt-4",children:(0,s.jsx)("div",{className:"space-y-4",children:ev.tasks&&ev.tasks.length>0?ev.tasks.map((e,l)=>(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.title}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]}),(0,s.jsx)(c.C,{variant:"completed"===e.status?"default":"outline",children:e.status})]}),(0,s.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Due: ",(0,C.p)(e.date)]})]},l)):(0,s.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No tasks available"})})}),(0,s.jsx)(Q.nU,{value:"notes",className:"mt-4",children:(0,s.jsx)("div",{className:"space-y-4",children:eU?(0,s.jsx)(V.g,{placeholder:"Enter notes about the lead",className:"min-h-[200px]",value:ev.notes,onChange:e=>em({...ev,notes:e.target.value})}):(0,s.jsx)("div",{className:"border rounded-lg p-4 min-h-[200px] whitespace-pre-wrap",children:ev.notes||"No notes available"})})})]})})]})})]}):(0,s.jsxs)(u.Zb,{children:[(0,s.jsx)(u.Ol,{children:(0,s.jsx)("div",{className:"flex justify-between items-center",children:(0,s.jsx)(u.ll,{children:"Leads"})})}),(0,s.jsx)(u.aY,{children:(0,s.jsxs)(i.iA,{children:[(0,s.jsx)(i.xD,{children:(0,s.jsxs)(i.SC,{children:[(0,s.jsx)(i.ss,{children:"Name"}),(0,s.jsx)(i.ss,{children:"Contact"}),(0,s.jsx)(i.ss,{children:"Status"}),(0,s.jsx)(i.ss,{children:"Type"}),(0,s.jsx)(i.ss,{children:"Property"}),(0,s.jsx)(i.ss,{children:"Created"}),(0,s.jsx)(i.ss,{children:"Assigned To"}),(0,s.jsx)(i.ss,{children:"Actions"})]})}),(0,s.jsx)(i.RM,{})]})})]})}let $=[{value:"cold",label:"Cold"},{value:"warm",label:"Warm"},{value:"hot",label:"Hot"},{value:"mild",label:"Mild"}],G=[{value:"Pre construction",label:"Pre Construction"},{value:"resale",label:"Resale"},{value:"seller",label:"Seller"},{value:"buyer",label:"Buyer"}],W=[{value:"initial_contact",label:"Initial Contact"},{value:"property_viewing",label:"Property Viewing"},{value:"offer_made",label:"Offer Made"},{value:"offer_accepted",label:"Offer Accepted"},{value:"deal_closed",label:"Deal Closed"},{value:"deal_lost",label:"Deal Lost"}],K=[{value:"english",label:"English"},{value:"french",label:"French"},{value:"mandarin",label:"Mandarin"},{value:"hindi",label:"Hindi"},{value:"punjabi",label:"Punjabi"}],X=[{value:"christianity",label:"Christianity"},{value:"islam",label:"Islam"},{value:"hinduism",label:"Hinduism"},{value:"sikhism",label:"Sikhism"},{value:"buddhism",label:"Buddhism"},{value:"jainism",label:"Jainism"},{value:"other",label:"Other"}],ee=[{value:"downtown",label:"Downtown"},{value:"north_york",label:"North York"},{value:"scarborough",label:"Scarborough"},{value:"etobicoke",label:"Etobicoke"},{value:"mississauga",label:"Mississauga"},{value:"brampton",label:"Brampton"},{value:"markham",label:"Markham"},{value:"vaughan",label:"Vaughan"}];function el(e){var l,a,r,i,c,u,h,x,p,v,m,g,j,y,f,w;let{open:C,onClose:S,lead:k}=e,{toast:P}=(0,b.pm)(),[_,T]=(0,n.useState)(!1),[R,I]=(0,n.useState)([]),[A,Q]=(0,n.useState)({name:null!==(l=null==k?void 0:k.name)&&void 0!==l?l:"",email:null!==(a=null==k?void 0:k.email)&&void 0!==a?a:"",phone:null!==(r=null==k?void 0:k.phone)&&void 0!==r?r:"",leadStatus:null!==(i=null==k?void 0:k.leadStatus)&&void 0!==i?i:"cold",leadType:null!==(c=null==k?void 0:k.leadType)&&void 0!==c?c:"buyer",property:null!==(u=null==k?void 0:k.property)&&void 0!==u?u:"",notes:null!==(h=null==k?void 0:k.notes)&&void 0!==h?h:"",assignedTo:null!==(x=null==k?void 0:k.assignedTo)&&void 0!==x?x:"unassigned",location:null!==(p=null==k?void 0:k.location)&&void 0!==p?p:"",conversion:null!==(v=null==k?void 0:k.conversion)&&void 0!==v?v:"initial_contact",age:null!==(m=null==k?void 0:k.age)&&void 0!==m?m:0,language:null!==(g=null==k?void 0:k.language)&&void 0!==g?g:"english",gender:null!==(j=null==k?void 0:k.gender)&&void 0!==j?j:"",religion:null!==(y=null==k?void 0:k.religion)&&void 0!==y?y:"",realtorAssociation:null!==(f=null==k?void 0:k.realtorAssociation)&&void 0!==f?f:"",salesHistory:null!==(w=null==k?void 0:k.salesHistory)&&void 0!==w?w:{closedSales:0,lastClosedDate:new Date().toISOString()}});(0,n.useEffect)(()=>{B()},[]);let B=async()=>{try{let e=await fetch("/api/users"),l=await e.json();I(l)}catch(e){console.error("Error fetching users:",e),P({variant:"destructive",title:"Error",description:"Failed to fetch users"})}},E=async e=>{e.preventDefault(),T(!0);try{let e={name:A.name,email:A.email,phone:A.phone,leadStatus:A.leadStatus,leadType:A.leadType,property:A.property,notes:A.notes,assignedTo:"unassigned"===A.assignedTo?void 0:A.assignedTo,date:new Date().toISOString(),callHistory:[],tasks:[],propertyPreferences:{budget:{min:0,max:0},propertyType:[],bedrooms:0,bathrooms:0,locations:[],features:[]},leadResponse:"inactive",leadSource:"google ads",clientType:"custom buyer",location:A.location,conversion:A.conversion,age:A.age,language:A.language,gender:A.gender,religion:A.religion,realtorAssociation:A.realtorAssociation,salesHistory:A.salesHistory},l=await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!l.ok){let e=await l.json();throw Error(e.message||"Failed to create lead")}P({title:"Success",description:"Lead added successfully."}),Q({name:"",email:"",phone:"",leadStatus:"cold",leadType:"buyer",property:"",notes:"",assignedTo:"unassigned",location:"",conversion:"initial_contact",age:0,language:"english",gender:"",religion:"",realtorAssociation:"",salesHistory:{closedSales:0,lastClosedDate:new Date().toISOString()}}),null==S||S(),window.location.reload()}catch(e){console.error("Error creating lead:",e),P({title:"Error",description:e instanceof Error?e.message:"Failed to add lead. Please try again.",variant:"destructive"})}finally{T(!1)}};return(0,s.jsx)(N.Vq,{open:C,onOpenChange:S,children:(0,s.jsxs)(N.cZ,{children:[(0,s.jsx)(N.fK,{children:(0,s.jsx)(N.$N,{children:k?"Edit Lead":"Add New Lead"})}),(0,s.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{htmlFor:"name",children:"Full Name"}),(0,s.jsx)(t.I,{id:"name",required:!0,value:A.name,onChange:e=>Q({...A,name:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{htmlFor:"email",children:"Email"}),(0,s.jsx)(t.I,{id:"email",type:"email",required:!0,value:A.email,onChange:e=>Q({...A,email:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{htmlFor:"phone",children:"Phone"}),(0,s.jsx)(t.I,{id:"phone",required:!0,value:A.phone,onChange:e=>Q({...A,phone:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{htmlFor:"status",children:"Status"}),(0,s.jsxs)(o.Ph,{value:A.leadStatus,onValueChange:e=>Q({...A,leadStatus:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select status"})}),(0,s.jsx)(o.Bw,{children:$.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{htmlFor:"type",children:"Lead Type"}),(0,s.jsxs)(o.Ph,{value:A.leadType,onValueChange:e=>Q({...A,leadType:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select type"})}),(0,s.jsx)(o.Bw,{children:G.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Assigned To"}),(0,s.jsxs)(o.Ph,{value:A.assignedTo,onValueChange:e=>Q({...A,assignedTo:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select a user"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"unassigned",children:"Unassigned"}),R.map(e=>(0,s.jsx)(o.Ql,{value:e._id,children:e.name},e._id))]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{htmlFor:"property",children:"Property"}),(0,s.jsx)(t.I,{id:"property",required:!0,value:A.property,onChange:e=>Q({...A,property:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{htmlFor:"notes",children:"Notes"}),(0,s.jsx)(V.g,{id:"notes",value:A.notes,onChange:e=>Q({...A,notes:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Location"}),(0,s.jsxs)(o.Ph,{value:A.location||"",onValueChange:e=>Q({...A,location:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select location"})}),(0,s.jsx)(o.Bw,{children:ee.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Lead Conversion"}),(0,s.jsxs)(o.Ph,{value:A.conversion,onValueChange:e=>Q({...A,conversion:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select conversion stage"})}),(0,s.jsx)(o.Bw,{children:W.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Realtor Association"}),(0,s.jsx)(t.I,{value:A.realtorAssociation,onChange:e=>Q({...A,realtorAssociation:e.target.value}),placeholder:"Enter realtor association"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Age"}),(0,s.jsx)(t.I,{type:"number",value:A.age,onChange:e=>Q({...A,age:parseInt(e.target.value)}),placeholder:"Enter age"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Gender"}),(0,s.jsxs)(o.Ph,{value:A.gender,onValueChange:e=>Q({...A,gender:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select gender"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"male",children:"Male"}),(0,s.jsx)(o.Ql,{value:"female",children:"Female"}),(0,s.jsx)(o.Ql,{value:"other",children:"Other"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Language"}),(0,s.jsxs)(o.Ph,{value:A.language,onValueChange:e=>Q({...A,language:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select language"})}),(0,s.jsx)(o.Bw,{children:K.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Religion"}),(0,s.jsxs)(o.Ph,{value:A.religion,onValueChange:e=>Q({...A,religion:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{placeholder:"Select religion"})}),(0,s.jsx)(o.Bw,{children:X.map(e=>(0,s.jsx)(o.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Closed Sales"}),(0,s.jsx)(t.I,{type:"number",value:A.salesHistory.closedSales,onChange:e=>Q({...A,salesHistory:{...A.salesHistory,closedSales:parseInt(e.target.value)}}),placeholder:"Number of closed sales"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L._,{children:"Last Closed Date"}),(0,s.jsx)(t.I,{type:"date",value:A.salesHistory.lastClosedDate.split("T")[0],onChange:e=>Q({...A,salesHistory:{...A.salesHistory,lastClosedDate:new Date(e.target.value).toISOString()}})})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(d.z,{type:"button",variant:"outline",onClick:S,children:"Cancel"}),(0,s.jsx)(d.z,{type:"submit",disabled:_,children:_?"Adding...":"Add Lead"})]})]})]})})}function ea(){return(0,s.jsx)(r.c,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Lead Management"}),(0,s.jsx)(Y,{}),(0,s.jsx)(el,{open:!1,onClose:()=>{}})]})})}},31478:function(e,l,a){"use strict";a.d(l,{C:function(){return t}});var s=a(3827),r=a(49769),n=a(1657);let i=(0,r.j)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function t(e){let{className:l,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:a}),l),...r})}},49842:function(e,l,a){"use strict";a.d(l,{_:function(){return o}});var s=a(3827),r=a(64090),n=a(24602),i=a(49769),t=a(1657);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)(n.f,{ref:l,className:(0,t.cn)(d(),a),...r})});o.displayName=n.f.displayName},45509:function(e,l,a){"use strict";a.d(l,{Bw:function(){return v},Ph:function(){return c},Ql:function(){return m},i4:function(){return h},ki:function(){return u}});var s=a(3827),r=a(64090),n=a(2072),i=a(23441),t=a(85159),d=a(80037),o=a(1657);let c=n.fC;n.ZA;let u=n.B4,h=r.forwardRef((e,l)=>{let{className:a,children:r,...t}=e;return(0,s.jsxs)(n.xz,{ref:l,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...t,children:[r,(0,s.jsx)(n.JO,{asChild:!0,children:(0,s.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=n.xz.displayName;let x=r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)(n.u_,{ref:l,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(t.Z,{className:"h-4 w-4"})})});x.displayName=n.u_.displayName;let p=r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)(n.$G,{ref:l,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=n.$G.displayName;let v=r.forwardRef((e,l)=>{let{className:a,children:r,position:i="popper",...t}=e;return(0,s.jsx)(n.h_,{children:(0,s.jsxs)(n.VY,{ref:l,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...t,children:[(0,s.jsx)(x,{}),(0,s.jsx)(n.l_,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(p,{})]})})});v.displayName=n.VY.displayName,r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)(n.__,{ref:l,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=n.__.displayName;let m=r.forwardRef((e,l)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(n.ck,{ref:l,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(n.eT,{children:r})]})});m.displayName=n.ck.displayName,r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)(n.Z0,{ref:l,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=n.Z0.displayName},19160:function(e,l,a){"use strict";a.d(l,{RM:function(){return d},SC:function(){return o},iA:function(){return i},pj:function(){return u},ss:function(){return c},xD:function(){return t}});var s=a(3827),r=a(64090),n=a(1657);let i=r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:l,className:(0,n.cn)("w-full caption-bottom text-sm",a),...r})})});i.displayName="Table";let t=r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)("thead",{ref:l,className:(0,n.cn)("[&_tr]:border-b",a),...r})});t.displayName="TableHeader";let d=r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)("tbody",{ref:l,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...r})});d.displayName="TableBody",r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)("tfoot",{ref:l,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let o=r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)("tr",{ref:l,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});o.displayName="TableRow";let c=r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)("th",{ref:l,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});c.displayName="TableHead";let u=r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)("td",{ref:l,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});u.displayName="TableCell",r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)("caption",{ref:l,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},40110:function(e,l,a){"use strict";a.d(l,{SP:function(){return o},dr:function(){return d},mQ:function(){return t},nU:function(){return c}});var s=a(3827),r=a(64090),n=a(64694),i=a(1657);let t=n.fC,d=r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)(n.aV,{ref:l,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});d.displayName=n.aV.displayName;let o=r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)(n.xz,{ref:l,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});o.displayName=n.xz.displayName;let c=r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)(n.VY,{ref:l,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});c.displayName=n.VY.displayName},23444:function(e,l,a){"use strict";a.d(l,{g:function(){return i}});var s=a(3827),r=a(64090),n=a(1657);let i=r.forwardRef((e,l)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:l,...r})});i.displayName="Textarea"}},function(e){e.O(0,[1425,6860,9593,8792,162,703,4885,1686,5648,4011,6863,2971,8069,1744],function(){return e(e.s=25760)}),_N_E=e.O()}]);