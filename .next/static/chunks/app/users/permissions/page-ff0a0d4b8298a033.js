(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9706],{46828:function(e,t,r){Promise.resolve().then(r.bind(r,9421))},9421:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(3827),n=r(64090),a=r(26863),i=r(27815),d=r(12617),l=r(85754),c=r(19160),o=r(47907),u=r(47788);let f=[{id:"dashboard",name:"Dashboard"},{id:"lead",name:"Lead Management"},{id:"inventory",name:"Inventory"},{id:"calendar",name:"Calendar"},{id:"users",name:"Users"},{id:"settings",name:"Settings"},{id:"favorites",name:"Favorites"},{id:"inbox",name:"Inbox"},{id:"mls",name:"MLS"}];function m(){let e=(0,o.useSearchParams)(),t=null==e?void 0:e.get("userId"),[r,a]=(0,n.useState)([]),m=(0,o.useRouter)(),{toast:h}=(0,u.pm)();(0,n.useEffect)(()=>{if(!t){m.push("/users");return}a(f.map(e=>({moduleId:e.id,moduleName:e.name,canView:!1,canAdd:!1,canEdit:!1,canDelete:!1})))},[t,m]);let p=(e,t,s)=>{a(r.map(r=>r.moduleId===e?{...r,[t]:s}:r))},x=async()=>{try{let e=await fetch("/api/users/".concat(t,"/permissions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({permissions:r})});if(!e.ok)throw Error("Failed to save permissions");let s=await e.json(),n=JSON.parse(localStorage.getItem("userPermissions")||"[]");localStorage.setItem("userPermissions",JSON.stringify([...n.filter(e=>e.userId!==t),{userId:t,permissions:s.permissions}])),h({title:"Success",description:"Permissions saved successfully."}),m.push("/users")}catch(e){console.error("Error saving permissions:",e),h({title:"Error",description:"Failed to save permissions. Please try again.",variant:"destructive"})}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"User Permissions"}),(0,s.jsx)(l.z,{onClick:x,className:"bg-[#ef4444] hover:bg-[#dc2626] text-white",children:"Save Changes"})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsx)(i.Ol,{children:(0,s.jsx)(i.ll,{children:"Module Permissions"})}),(0,s.jsx)(i.aY,{children:(0,s.jsxs)(c.iA,{children:[(0,s.jsx)(c.xD,{children:(0,s.jsxs)(c.SC,{children:[(0,s.jsx)(c.ss,{children:"Module Name"}),(0,s.jsx)(c.ss,{children:"View"}),(0,s.jsx)(c.ss,{children:"Add"}),(0,s.jsx)(c.ss,{children:"Edit"}),(0,s.jsx)(c.ss,{children:"Delete"})]})}),(0,s.jsx)(c.RM,{children:r.map(e=>(0,s.jsxs)(c.SC,{children:[(0,s.jsx)(c.pj,{children:e.moduleName}),(0,s.jsx)(c.pj,{children:(0,s.jsx)(d.X,{checked:e.canView,onCheckedChange:t=>p(e.moduleId,"canView",!!t)})}),(0,s.jsx)(c.pj,{children:(0,s.jsx)(d.X,{checked:e.canAdd,onCheckedChange:t=>p(e.moduleId,"canAdd",!!t)})}),(0,s.jsx)(c.pj,{children:(0,s.jsx)(d.X,{checked:e.canEdit,onCheckedChange:t=>p(e.moduleId,"canEdit",!!t)})}),(0,s.jsx)(c.pj,{children:(0,s.jsx)(d.X,{checked:e.canDelete,onCheckedChange:t=>p(e.moduleId,"canDelete",!!t)})})]},e.moduleId))})]})})]})]})}function h(){return(0,s.jsx)(a.c,{children:(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-center",children:"Loading permissions..."})}),children:(0,s.jsx)(m,{})})})}},12617:function(e,t,r){"use strict";r.d(t,{X:function(){return E}});var s=r(3827),n=r(64090),a=r(61266),i=r(84104),d=r(44991),l=r(9310),c=r(65030),o=r(76769),u=r(12642),f=r(29586),m="Checkbox",[h,p]=(0,i.b)(m),[x,b]=h(m),j=n.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:i,checked:c,defaultChecked:o,required:u,disabled:m,value:h="on",onCheckedChange:p,form:b,...j}=e,[v,y]=n.useState(null),w=(0,a.e)(t,e=>y(e)),C=n.useRef(!1),E=!v||b||!!v.closest("form"),[R=!1,S]=(0,l.T)({prop:c,defaultProp:o,onChange:p}),I=n.useRef(R);return n.useEffect(()=>{let e=null==v?void 0:v.form;if(e){let t=()=>S(I.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[v,S]),(0,s.jsxs)(x,{scope:r,state:R,disabled:m,children:[(0,s.jsx)(f.WV.button,{type:"button",role:"checkbox","aria-checked":k(R)?"mixed":R,"aria-required":u,"data-state":N(R),"data-disabled":m?"":void 0,disabled:m,value:h,...j,ref:w,onKeyDown:(0,d.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,d.M)(e.onClick,e=>{S(e=>!!k(e)||!e),E&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),E&&(0,s.jsx)(g,{control:v,bubbles:!C.current,name:i,value:h,checked:R,required:u,disabled:m,form:b,style:{transform:"translateX(-100%)"},defaultChecked:!k(o)&&o})]})});j.displayName=m;var v="CheckboxIndicator",y=n.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:n,...a}=e,i=b(v,r);return(0,s.jsx)(u.z,{present:n||k(i.state)||!0===i.state,children:(0,s.jsx)(f.WV.span,{"data-state":N(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});y.displayName=v;var g=e=>{let{control:t,checked:r,bubbles:a=!0,defaultChecked:i,...d}=e,l=n.useRef(null),u=(0,c.D)(r),f=(0,o.t)(t);n.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(u!==r&&t){let s=new Event("click",{bubbles:a});e.indeterminate=k(r),t.call(e,!k(r)&&r),e.dispatchEvent(s)}},[u,r,a]);let m=n.useRef(!k(r)&&r);return(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:null!=i?i:m.current,...d,tabIndex:-1,ref:l,style:{...e.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function k(e){return"indeterminate"===e}function N(e){return k(e)?"indeterminate":e?"checked":"unchecked"}var w=r(80037),C=r(1657);let E=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(j,{ref:t,className:(0,C.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...n,children:(0,s.jsx)(y,{className:(0,C.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(w.Z,{className:"h-4 w-4"})})})});E.displayName=j.displayName},19160:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return c},iA:function(){return i},pj:function(){return u},ss:function(){return o},xD:function(){return d}});var s=r(3827),n=r(64090),a=r(1657);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...n})})});i.displayName="Table";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",r),...n})});d.displayName="TableHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...n})});l.displayName="TableBody",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...n})}).displayName="TableFooter";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...n})});c.displayName="TableRow";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("th",{ref:t,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...n})});o.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("td",{ref:t,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...n})});u.displayName="TableCell",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",r),...n})}).displayName="TableCaption"},49108:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(57977).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},42527:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(57977).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},65030:function(e,t,r){"use strict";r.d(t,{D:function(){return n}});var s=r(64090);function n(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}},function(e){e.O(0,[6860,9593,8792,162,703,9096,4011,6863,2971,8069,1744],function(){return e(e.s=46828)}),_N_E=e.O()}]);