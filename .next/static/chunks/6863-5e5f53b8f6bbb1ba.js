"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6863],{26863:function(e,s,a){a.d(s,{c:function(){return I}});var l=a(3827),t=a(64090),r=a(8792),c=a(47907),i=a(1657),n=a(85754),m=a(45179),h=a(5423),x=a(34059),o=a(90684),d=a(97307),f=a(77326),u=a(29910),j=a(79744),p=a(28670),g=a(43345),N=a(49108),v=a(81049),w=a(52235),b=a(20703);function y(){return(0,l.jsxs)(n.z,{variant:"ghost",className:"flex items-center gap-2",children:[(0,l.jsx)(b.default,{src:"/canada-flag.svg",alt:"Canada Flag",width:24,height:16,className:"rounded shadow-sm"}),(0,l.jsx)("span",{children:"English"})]})}var k=a(27815),C=a(28877),z=a(50660),Z=a(99812),S=a(42706),E=a(93930);function I(e){var s;let{children:a}=e,b=(0,c.usePathname)(),I=(0,c.useRouter)(),[_,F]=(0,t.useState)(""),[L,T]=(0,t.useState)([]),[J,O]=(0,t.useState)(!1),[U,A]=(0,t.useState)(!1),[D,H]=(0,t.useState)(!1),[P,R]=(0,t.useState)(!1),[q,G]=(0,t.useState)(null);(0,t.useEffect)(()=>{let e=localStorage.getItem("user");e?G(JSON.parse(e)):I.push("/login")},[I]);let V=[{href:"/dashboard",icon:(0,l.jsx)(h.Z,{className:"h-5 w-5"}),label:"Dashboard"},{href:"/lead",icon:(0,l.jsx)(x.Z,{className:"h-5 w-5"}),label:"Leads"},{href:"/inbox",icon:(0,l.jsx)(o.Z,{className:"h-5 w-5"}),label:"Inbox"},{href:"/calendar",icon:(0,l.jsx)(d.Z,{className:"h-5 w-5"}),label:"Calendar"},{href:"/inventory",icon:(0,l.jsx)(f.Z,{className:"h-5 w-5"}),label:"Inventory"},{href:"/email-templates",icon:(0,l.jsx)(o.Z,{className:"h-5 w-5"}),label:"Email Templates"},{href:"/users",icon:(0,l.jsx)(x.Z,{className:"h-5 w-5"}),label:"Users"},{href:"/settings",icon:(0,l.jsx)(u.Z,{className:"h-5 w-5"}),label:"Settings"}],X=e=>{if(F(e),!e.trim()){T([]),O(!1);return}O(!0),T(C.c.search(e))},$=()=>{F(""),T([]),O(!1)},Q=e=>{I.push(e.link),$(),H(!1)},W=()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),document.cookie="user=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",I.push("/")},Y=async e=>{try{if(!(await fetch("/api/users/".concat(q._id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatar:e})})).ok)throw Error("Failed to update avatar");let s={...q,avatar:e};localStorage.setItem("user",JSON.stringify(s)),G(s)}catch(e){throw console.error("Error updating avatar:",e),e}};return q?(0,l.jsxs)("div",{className:"min-h-screen w-full bg-gray-50 flex flex-col",children:[(0,l.jsx)("header",{className:"lg:hidden sticky top-0 z-40 bg-white border-b w-full",children:(0,l.jsxs)("div",{className:"flex h-14 sm:h-16 items-center px-3 sm:px-4",children:[(0,l.jsx)(n.z,{variant:"ghost",size:"sm",className:"mr-2 -ml-1",onClick:()=>A(!U),children:(0,l.jsx)(j.Z,{className:"h-5 w-5"})}),(0,l.jsxs)("div",{className:"flex-1 flex items-center justify-between gap-2 sm:gap-4 min-w-0",children:[(0,l.jsx)(r.default,{href:"/dashboard",className:"font-semibold text-red-500 truncate text-sm sm:text-base",children:"Get Home Realty"}),(0,l.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,l.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>H(!0),className:"h-8 w-8 sm:h-9 sm:w-9",children:(0,l.jsx)(p.Z,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),(0,l.jsxs)(n.z,{variant:"ghost",size:"sm",className:"h-8 w-8 sm:h-9 sm:w-9 relative",children:[(0,l.jsx)(g.Z,{className:"h-4 w-4 sm:h-5 sm:w-5"}),(0,l.jsx)("span",{className:"absolute right-1.5 top-1.5 h-2 w-2 rounded-full bg-red-500"})]})]})]})]})}),D&&(0,l.jsxs)("div",{className:"fixed inset-0 z-50 bg-white flex flex-col",children:[(0,l.jsx)("div",{className:"border-b safe-top",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 p-3 sm:p-4",children:[(0,l.jsx)(n.z,{variant:"ghost",size:"sm",className:"h-8 w-8 sm:h-9 sm:w-9 -ml-1",onClick:()=>H(!1),children:(0,l.jsx)(N.Z,{className:"h-5 w-5"})}),(0,l.jsxs)("div",{className:"flex-1 relative min-w-0",children:[(0,l.jsx)(p.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),(0,l.jsx)(m.I,{type:"search",placeholder:"Search...",className:"w-full pl-9 h-9 sm:h-10 text-sm sm:text-base",value:_,onChange:e=>X(e.target.value),autoFocus:!0})]})]})}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 safe-bottom",children:J&&L.map(e=>(0,l.jsx)(n.z,{variant:"ghost",className:"w-full justify-start text-left mb-2 h-auto py-2 px-3",onClick:()=>Q(e),children:(0,l.jsxs)("div",{className:"w-full min-w-0",children:[(0,l.jsx)("div",{className:"font-medium truncate text-sm sm:text-base",children:e.title}),(0,l.jsx)("div",{className:"text-xs sm:text-sm text-gray-500 truncate",children:e.subtitle})]})},"".concat(e.type,"-").concat(e.id)))})]}),(0,l.jsxs)("div",{className:"flex-1 flex relative lg:h-[calc(100vh-0px)]",children:[(0,l.jsxs)("aside",{className:(0,i.cn)("fixed inset-y-0 left-0 z-40 w-[240px] sm:w-64 bg-white border-r transform transition-transform duration-200 ease-in-out lg:translate-x-0 lg:static safe-top safe-bottom",U?"translate-x-0":"-translate-x-full"),children:[(0,l.jsx)("div",{className:"flex h-14 sm:h-16 items-center border-b px-4",children:(0,l.jsx)(r.default,{href:"/dashboard",className:"font-semibold text-red-500 text-sm sm:text-base",children:"Get Home Realty"})}),(0,l.jsxs)("nav",{className:"flex flex-col h-[calc(100%-3.5rem)] sm:h-[calc(100%-4rem)] p-3 sm:p-4",children:[(0,l.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-1 gap-2 sm:space-y-1",children:V.map(e=>(0,l.jsxs)(r.default,{href:e.href,className:(0,i.cn)("flex items-center gap-2 rounded-lg px-3 py-2 text-gray-500 transition-colors hover:text-gray-900 text-sm sm:text-base",b===e.href?"bg-gray-100 text-gray-900":""),onClick:s=>{s.preventDefault(),A(!1),I.push(e.href)},children:[e.icon,(0,l.jsx)("span",{className:"truncate",children:e.label})]},e.href))}),(0,l.jsx)("div",{className:"flex-1"}),(0,l.jsxs)(n.z,{variant:"ghost",onClick:()=>{W(),A(!1)},className:"w-full flex items-center gap-2 text-gray-500 hover:text-red-500 text-sm sm:text-base justify-start h-auto py-2",children:[(0,l.jsx)(v.Z,{className:"h-5 w-5 flex-shrink-0"}),(0,l.jsx)("span",{className:"truncate",children:"Logout"})]})]})]}),(0,l.jsxs)("main",{className:"flex-1 flex flex-col min-h-0 w-full",children:[(0,l.jsxs)("header",{className:"hidden lg:flex h-14 sm:h-16 items-center justify-between border-b bg-white px-4 sm:px-6 sticky top-0 z-30",children:[(0,l.jsx)("div",{className:"flex-1 flex items-center gap-4 max-w-xl",children:(0,l.jsxs)("div",{className:"relative w-full",children:[(0,l.jsx)(p.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),(0,l.jsx)(m.I,{type:"search",placeholder:"Search...",className:"w-full pl-9 pr-9 h-9 sm:h-10",value:_,onChange:e=>X(e.target.value)}),_&&(0,l.jsx)(n.z,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:$,children:(0,l.jsx)(w.Z,{className:"h-4 w-4"})}),J&&L.length>0&&(0,l.jsx)(k.Zb,{className:"absolute top-full left-0 right-0 mt-1 shadow-lg",children:(0,l.jsx)(k.aY,{className:"p-1 sm:p-2 max-h-[60vh] overflow-y-auto",children:L.map(e=>(0,l.jsx)(n.z,{variant:"ghost",className:"w-full justify-start text-left h-auto py-2 px-3",onClick:()=>Q(e),children:(0,l.jsxs)("div",{className:"w-full min-w-0",children:[(0,l.jsx)("div",{className:"font-medium truncate",children:e.title}),(0,l.jsx)("div",{className:"text-sm text-gray-500 truncate",children:e.subtitle})]})},"".concat(e.type,"-").concat(e.id)))})})]})}),(0,l.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4 ml-4",children:[(0,l.jsxs)(n.z,{variant:"ghost",size:"sm",className:"h-8 w-8 sm:h-9 sm:w-9 relative",children:[(0,l.jsx)(g.Z,{className:"h-4 w-4 sm:h-5 sm:w-5"}),(0,l.jsx)("span",{className:"absolute right-1.5 top-1.5 h-2 w-2 rounded-full bg-red-500"})]}),(0,l.jsx)(y,{}),(0,l.jsxs)(E.h_,{children:[(0,l.jsx)(E.$F,{asChild:!0,children:(0,l.jsxs)(n.z,{variant:"ghost",className:"flex items-center gap-2",children:[(0,l.jsxs)(z.qE,{className:"h-8 w-8",children:[(0,l.jsx)(z.F$,{src:null==q?void 0:q.avatar,alt:null==q?void 0:q.name}),(0,l.jsx)(z.Q5,{children:null==q?void 0:null===(s=q.name)||void 0===s?void 0:s.substring(0,2).toUpperCase()})]}),(0,l.jsx)("span",{className:"hidden md:inline-block",children:null==q?void 0:q.name})]})}),(0,l.jsxs)(E.AW,{align:"end",className:"w-56",children:[(0,l.jsxs)(E.Xi,{onClick:()=>R(!0),children:[(0,l.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Profile Settings"]}),(0,l.jsx)(E.VD,{}),(0,l.jsxs)(E.Xi,{onClick:W,children:[(0,l.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 lg:p-6 safe-bottom",children:(0,l.jsx)("div",{className:"container mx-auto max-w-7xl",children:a})})]})]}),U&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>A(!1)}),q&&(0,l.jsx)(S.Vq,{open:P,onOpenChange:R,children:(0,l.jsx)(S.cZ,{className:"sm:max-w-[425px]",children:(0,l.jsx)(Z.L,{user:q,onUpdateAvatar:Y})})})]}):(0,l.jsx)("div",{className:"flex h-screen items-center justify-center bg-gray-50",children:(0,l.jsx)("div",{className:"text-gray-500",children:"Loading..."})})}}}]);